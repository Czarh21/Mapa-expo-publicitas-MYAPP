<!DOCTYPE html>
<html lang="es">
  <head>
    <meta charset="UTF-8" />
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no"
    />
    <title>Mapa Expo Publicitas 2025</title>
    <style>
      /* Estilos generales */
      * {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
        font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto,
          Oxygen, Ubuntu, Cantarell, "Open Sans", "Helvetica Neue", sans-serif;
      }

      body {
        background-color: #f5f5f5;
        margin: 0;
        padding: 10px;
        overflow-x: hidden;
        touch-action: manipulation;
      }

      .container {
        max-width: 100%;
        margin: 0 auto;
        background-color: white;
        padding: 15px;
        border-radius: 8px;
        box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
      }

      h1,
      h2,
      h3 {
        text-align: center;
        color: #333;
        font-size: 1.5rem;
        margin-bottom: 10px;
      }

      .section-title {
        background-color: #f0f0f0;
        padding: 10px;
        margin: 15px 0 10px 0;
        border-radius: 4px;
        font-size: 16px;
        border-left: 4px solid #4a6bff;
      }

      .module-grid {
        display: grid;
        grid-template-columns: repeat(auto-fill, minmax(140px, 1fr));
        gap: 10px;
        margin-top: 15px;
      }

      .module-card {
        border: 1px solid #ddd;
        border-radius: 6px;
        padding: 12px;
        text-align: center;
        cursor: pointer;
        transition: transform 0.2s, box-shadow 0.2s;
        position: relative;
        font-size: 0.9rem;
      }

      .module-card:hover {
        transform: translateY(-3px);
        box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
      }

      .module-card.red {
        background-color: #ffebee;
        border-color: #ffcdd2;
      }

      .module-card.green {
        background-color: #e8f5e9;
        border-color: #c8e6c9;
      }

      .module-card.orange {
        background-color: #fff3e0;
        border-color: #ffe0b2;
      }

      .module-card.yellow {
        background-color: #fffde7;
        border-color: #fff9c4;
      }

      .module-card h3 {
        margin-top: 0;
        margin-bottom: 8px;
        color: #333;
        font-size: 1rem;
      }

      .module-card p {
        margin: 0;
        color: #666;
        font-size: 0.8rem;
      }

      /* Estilos de parpadeo para cada color */
      .module-card.highlight.red {
        border: 2px solid #f44336;
        box-shadow: 0 0 15px rgba(244, 67, 54, 0.5);
        animation: pulse-red 1.5s infinite;
      }

      .module-card.highlight.green {
        border: 2px solid #4caf50;
        box-shadow: 0 0 15px rgba(76, 175, 80, 0.5);
        animation: pulse-green 1.5s infinite;
      }

      .module-card.highlight.orange {
        border: 2px solid #ff9800;
        box-shadow: 0 0 15px rgba(255, 152, 0, 0.5);
        animation: pulse-orange 1.5s infinite;
      }

      .module-card.highlight.yellow {
        border: 2px solid #ffeb3b;
        box-shadow: 0 0 15px rgba(255, 235, 59, 0.5);
        animation: pulse-yellow 1.5s infinite;
      }

      /* Módulos sin color específico */
      .module-card.highlight:not(.red):not(.green):not(.orange):not(.yellow) {
        border: 2px solid #4a6bff;
        box-shadow: 0 0 15px rgba(74, 107, 255, 0.5);
        animation: pulse-blue 1.5s infinite;
      }

      @keyframes pulse-red {
        0% {
          box-shadow: 0 0 0 0 rgba(244, 67, 54, 0.7);
        }
        70% {
          box-shadow: 0 0 0 10px rgba(244, 67, 54, 0);
        }
        100% {
          box-shadow: 0 0 0 0 rgba(244, 67, 54, 0);
        }
      }

      @keyframes pulse-green {
        0% {
          box-shadow: 0 0 0 0 rgba(76, 175, 80, 0.7);
        }
        70% {
          box-shadow: 0 0 0 10px rgba(76, 175, 80, 0);
        }
        100% {
          box-shadow: 0 0 0 0 rgba(76, 175, 80, 0);
        }
      }

      @keyframes pulse-orange {
        0% {
          box-shadow: 0 0 0 0 rgba(255, 152, 0, 0.7);
        }
        70% {
          box-shadow: 0 0 0 10px rgba(255, 152, 0, 0);
        }
        100% {
          box-shadow: 0 0 0 0 rgba(255, 152, 0, 0);
        }
      }

      @keyframes pulse-yellow {
        0% {
          box-shadow: 0 0 0 0 rgba(255, 235, 59, 0.7);
        }
        70% {
          box-shadow: 0 0 0 10px rgba(255, 235, 59, 0);
        }
        100% {
          box-shadow: 0 0 0 0 rgba(255, 235, 59, 0);
        }
      }

      @keyframes pulse-blue {
        0% {
          box-shadow: 0 0 0 0 rgba(74, 107, 255, 0.7);
        }
        70% {
          box-shadow: 0 0 0 10px rgba(74, 107, 255, 0);
        }
        100% {
          box-shadow: 0 0 0 0 rgba(74, 107, 255, 0);
        }
      }

      @keyframes blink-stand {
        0%,
        100% {
          stroke-width: 3px;
          stroke: #000;
          transform: scale(1);
        }
        50% {
          stroke-width: 5px;
          stroke: #ff0000;
          transform: scale(1.05);
        }
      }

      .module.blinking {
        animation: blink-stand 0.7s infinite;
        stroke-width: 3px;
        stroke: #000;
        z-index: 10;
      }

      .search-container {
        margin-bottom: 15px;
        text-align: center;
      }

      .search-input {
        padding: 10px 15px;
        width: 100%;
        max-width: 300px;
        border: 1px solid #ddd;
        border-radius: 4px;
        font-size: 16px;
      }

      .search-input:focus {
        outline: none;
        border-color: #4a6bff;
        box-shadow: 0 0 0 2px rgba(74, 107, 255, 0.2);
      }

      .module-info {
        background-color: #f5f5f5;
        border-left: 4px solid #4a6bff;
        padding: 15px;
        margin-bottom: 20px;
        border-radius: 0 4px 4px 0;
      }

      .module-info h3 {
        margin-top: 0;
        color: #333;
      }

      .module-info p {
        margin-bottom: 0;
        color: #666;
      }

      .myapp-info {
        background-color: #ffeaef;
        border-left: 4px solid #ff4081;
      }

      .filters {
        display: flex;
        flex-wrap: wrap;
        gap: 8px;
        margin-bottom: 15px;
        justify-content: center;
      }

      .filter-btn {
        padding: 6px 10px;
        border: none;
        border-radius: 4px;
        background-color: #f0f0f0;
        cursor: pointer;
        transition: background-color 0.2s;
        font-size: 0.8rem;
        white-space: nowrap;
      }

      .filter-btn:hover {
        background-color: #e0e0e0;
      }

      .filter-btn.active {
        background-color: #4a6bff;
        color: white;
      }

      .filter-btn.red {
        border-left: 4px solid #f44336;
      }

      .filter-btn.green {
        border-left: 4px solid #4caf50;
      }

      .filter-btn.orange {
        border-left: 4px solid #ff9800;
      }

      .filter-btn.yellow {
        border-left: 4px solid #ffeb3b;
      }

      .corridor-section {
        background-color: #e3f2fd;
        padding: 8px;
        margin: 15px 0;
        border-radius: 4px;
        text-align: center;
        font-weight: bold;
        color: #1565c0;
        font-size: 0.9rem;
      }

      .no-results {
        grid-column: 1 / -1;
        text-align: center;
        padding: 20px;
        background-color: #f5f5f5;
        border-radius: 4px;
        color: #666;
      }

      .back-to-top {
        position: fixed;
        bottom: 20px;
        right: 20px;
        background-color: #4a6bff;
        color: white;
        width: 40px;
        height: 40px;
        border-radius: 50%;
        display: flex;
        align-items: center;
        justify-content: center;
        cursor: pointer;
        box-shadow: 0 2px 10px rgba(0, 0, 0, 0.2);
        opacity: 0;
        transition: opacity 0.3s;
        text-decoration: none;
        font-weight: bold;
        z-index: 100;
      }

      .back-to-top.visible {
        opacity: 1;
      }

      .loading {
        text-align: center;
        padding: 20px;
        font-style: italic;
        color: #666;
      }

      /* Estilos del mapa interactivo */
      .map-container {
        display: grid;
        grid-template-columns: 1fr;
        gap: 1rem;
        margin-bottom: 15px;
      }

      .sidebar {
        display: flex;
        flex-direction: column;
        gap: 1rem;
      }

      .card {
        background-color: white;
        border-radius: 0.75rem;
        box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1),
          0 2px 4px -1px rgba(0, 0, 0, 0.06);
        padding: 0.8rem;
      }

      .card-title {
        font-size: 1rem;
        font-weight: 600;
        margin-bottom: 0.5rem;
        color: #1f2937;
      }

      .search-form {
        display: flex;
        gap: 0.5rem;
      }

      .search-button {
        display: flex;
        align-items: center;
        justify-content: center;
        padding: 0.5rem;
        background-color: #3b82f6;
        color: white;
        border: none;
        border-radius: 0.375rem;
        cursor: pointer;
        transition: background-color 0.2s;
      }

      .search-button:hover {
        background-color: #2563eb;
      }

      .legend-item {
        display: flex;
        align-items: center;
        margin-bottom: 0.5rem;
      }

      .legend-color {
        width: 1rem;
        height: 1rem;
        border-radius: 0.25rem;
        margin-right: 0.5rem;
      }

      .legend-text {
        font-size: 0.8rem;
        color: #4b5563;
      }

      .info-text {
        font-size: 0.8rem;
        color: #6b7280;
      }

      .selected-stand {
        font-weight: 500;
        margin-bottom: 0.25rem;
      }

      .map-viewer {
        background-color: white;
        border-radius: 0.75rem;
        box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1),
          0 2px 4px -1px rgba(0, 0, 0, 0.06);
        padding: 0.8rem;
        position: relative;
        overflow: hidden;
      }

      .zoom-controls {
        position: absolute;
        top: 0.8rem;
        right: 0.8rem;
        z-index: 10;
        background-color: white;
        border-radius: 0.5rem;
        box-shadow: 0 1px 3px rgba(0, 0, 0, 0.12), 0 1px 2px rgba(0, 0, 0, 0.24);
        padding: 0.25rem;
        display: flex;
        flex-direction: column;
      }

      .zoom-button {
        display: flex;
        align-items: center;
        justify-content: center;
        width: 2rem;
        height: 2rem;
        background-color: transparent;
        border: none;
        border-radius: 9999px;
        cursor: pointer;
        transition: background-color 0.2s;
      }

      .zoom-button:hover {
        background-color: #f3f4f6;
      }

      .zoom-level {
        font-size: 0.75rem;
        text-align: center;
        margin: 0.25rem 0;
        font-weight: 500;
      }

      .zoom-divider {
        height: 1px;
        background-color: #e5e7eb;
        margin: 0.25rem 0;
      }

      .map-scroll {
        height: 60vh;
        overflow: auto;
        position: relative;
        cursor: grab;
        -webkit-overflow-scrolling: touch;
      }

      .map-content {
        transform-origin: center;
        transition: transform 0.1s ease-out;
      }

      /* Estilos del tooltip */
      .tooltip {
        position: absolute;
        background: linear-gradient(135deg, #3b82f6, #8b5cf6);
        color: white;
        padding: 0.5rem 0.75rem;
        border-radius: 0.375rem;
        font-size: 0.875rem;
        font-weight: 500;
        box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
        z-index: 50;
        pointer-events: none;
        transform: translateX(-50%);
        opacity: 0;
        visibility: hidden;
        transition: opacity 0.2s, transform 0.2s;
      }

      .tooltip::after {
        content: "";
        position: absolute;
        bottom: -6px;
        left: 50%;
        transform: translateX(-50%);
        border-width: 6px 6px 0;
        border-style: solid;
        border-color: #8b5cf6 transparent transparent;
      }

      /* Estilos del SVG */
      svg {
        max-width: 100%;
        height: auto;
      }

      .module {
        fill: #e0e0e0;
        stroke: #333;
        stroke-width: 1;
        cursor: pointer;
        transition: fill 0.2s ease-in-out, stroke-width 0.2s ease-in-out;
      }

      .module:hover {
        fill: #d0d0d0;
        stroke-width: 2;
      }

      .module.red {
        fill: #ef4444;
      }

      .module.red:hover {
        fill: #dc2626;
      }

      .module.green {
        fill: #16a34a;
      }

      .module.green:hover {
        fill: #15803d;
      }

      .module.orange {
        fill: #f97316;
      }

      .module.orange:hover {
        fill: #ea580c;
      }

      .module.yellow {
        fill: #facc15;
      }

      .module.yellow:hover {
        fill: #eab308;
      }

      .corridor {
        fill: #7dd3fc;
        stroke: #0284c7;
        stroke-width: 1;
      }

      .corridor-label {
        font-size: 12px;
        fill: #0c4a6e;
        font-weight: 600;
        pointer-events: none;
      }

      .stand-label {
        font-size: 10px;
        fill: #1e293b;
        font-weight: 500;
        pointer-events: none;
      }

      .selected {
        stroke: #000;
        stroke-width: 2;
      }

      /* Botón de mapa interactivo */
      .map-button {
        padding: 10px 15px;
        background-color: #4a6bff;
        color: white;
        border: none;
        border-radius: 4px;
        font-size: 16px;
        cursor: pointer;
        box-shadow: 0 2px 5px rgba(0, 0, 0, 0.2);
        transition: background-color 0.3s, transform 0.2s;
        margin: 15px auto;
        display: block;
        width: 100%;
        max-width: 300px;
      }

      .map-button:hover {
        background-color: #3a5ae8;
        transform: translateY(-2px);
      }

      .map-button:active {
        transform: translateY(0);
      }

      /* Contenedor del mapa interactivo */
      #interactive-map-container {
        display: none;
        margin-bottom: 15px;
        border-radius: 8px;
        overflow: hidden;
        box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
      }

      /* Botón de rotación */
      .rotate-button {
        position: fixed;
        bottom: 20px;
        left: 20px;
        background-color: #4a6bff;
        color: white;
        width: 40px;
        height: 40px;
        border-radius: 50%;
        display: flex;
        align-items: center;
        justify-content: center;
        cursor: pointer;
        box-shadow: 0 2px 10px rgba(0, 0, 0, 0.2);
        z-index: 100;
        border: none;
      }

      .rotate-button svg {
        width: 24px;
        height: 24px;
      }

      /* Estilos para modo horizontal */
      .landscape-mode {
        position: fixed;
        top: 0;
        left: 0;
        z-index: 1000;
        background-color: white;
        width: 100vw;
        height: 100vh;
        overflow: auto;
        padding: 10px;
      }

      .landscape-mode .map-container {
        grid-template-columns: 1fr 3fr;
        height: 100%;
      }

      .landscape-mode .map-scroll {
        height: calc(100vh - 4rem);
      }

      .landscape-mode .close-landscape {
        position: absolute;
        top: 10px;
        right: 10px;
        background-color: #f44336;
        color: white;
        width: 30px;
        height: 30px;
        border-radius: 50%;
        display: flex;
        align-items: center;
        justify-content: center;
        cursor: pointer;
        z-index: 1001;
        border: none;
      }

      /* Media queries para dispositivos móviles */
      @media (min-width: 768px) {
        .map-container {
          grid-template-columns: 1fr 3fr;
        }

        .container {
          padding: 20px;
        }

        h1 {
          font-size: 2rem;
        }

        .module-grid {
          grid-template-columns: repeat(auto-fill, minmax(180px, 1fr));
        }

        .map-scroll {
          height: 70vh;
        }
      }

      @media (max-width: 480px) {
        .filters {
          flex-wrap: nowrap;
          overflow-x: auto;
          padding-bottom: 5px;
          justify-content: flex-start;
          -webkit-overflow-scrolling: touch;
        }

        .filter-btn {
          flex: 0 0 auto;
        }

        .module-card h3 {
          font-size: 0.9rem;
        }

        .module-card p {
          font-size: 0.75rem;
        }

        .stand-label {
          font-size: 8px;
        }
      }
    </style>
  </head>
  <body>
    <div class="container">
      <h1>Mapa Expo Publicitas 2025</h1>
      <p style="text-align: center">Desarrollado por MYAPP</p>

      <!-- Botón de Mapa Interactivo -->
      <button id="toggle-map-btn" class="map-button">
        Mostrar Mapa Interactivo
      </button>

      <!-- Contenedor del Mapa Interactivo -->
      <div id="interactive-map-container">
        <div class="map-container">
          <div class="sidebar">
            <div class="card">
              <h3 class="card-title">Buscar Stand</h3>
              <form class="search-form" id="map-search-form">
                <input
                  type="text"
                  class="search-input"
                  id="map-search-input"
                  placeholder="Ej: 1205, 415..."
                />
                <button type="submit" class="search-button">
                  <svg
                    xmlns="http://www.w3.org/2000/svg"
                    width="16"
                    height="16"
                    viewBox="0 0 24 24"
                    fill="none"
                    stroke="currentColor"
                    strokeWidth="2"
                    strokeLinecap="round"
                    strokeLinejoin="round"
                  >
                    <circle cx="11" cy="11" r="8"></circle>
                    <line x1="21" y1="21" x2="16.65" y2="16.65"></line>
                  </svg>
                </button>
              </form>
            </div>

            <div class="card">
              <h3 class="card-title">Leyenda</h3>
              <div class="legend-item">
                <div
                  class="legend-color"
                  style="background-color: #ef4444"
                ></div>
                <span class="legend-text">Zona Roja</span>
              </div>
              <div class="legend-item">
                <div
                  class="legend-color"
                  style="background-color: #16a34a"
                ></div>
                <span class="legend-text">Zona Verde</span>
              </div>
              <div class="legend-item">
                <div
                  class="legend-color"
                  style="background-color: #f97316"
                ></div>
                <span class="legend-text">Zona Naranja</span>
              </div>
              <div class="legend-item">
                <div
                  class="legend-color"
                  style="background-color: #facc15"
                ></div>
                <span class="legend-text">Zona Amarilla</span>
              </div>
              <div class="legend-item">
                <div
                  class="legend-color"
                  style="background-color: #7dd3fc"
                ></div>
                <span class="legend-text">Pasillos</span>
              </div>
            </div>

            <div class="card">
              <h3 class="card-title">Información</h3>
              <div id="stand-info">
                <p class="info-text">
                  Selecciona un stand para ver su información
                </p>
              </div>
            </div>
          </div>

          <div class="map-viewer">
            <div class="zoom-controls">
              <button class="zoom-button" id="zoom-in">
                <svg
                  xmlns="http://www.w3.org/2000/svg"
                  width="16"
                  height="16"
                  viewBox="0 0 24 24"
                  fill="none"
                  stroke="currentColor"
                  strokeWidth="2"
                  strokeLinecap="round"
                  strokeLinejoin="round"
                >
                  <circle cx="11" cy="11" r="8"></circle>
                  <line x1="11" y1="8" x2="11" y2="14"></line>
                  <line x1="8" y1="11" x2="14" y2="11"></line>
                </svg>
              </button>
              <div class="zoom-level" id="zoom-level">100%</div>
              <button class="zoom-button" id="zoom-out">
                <svg
                  xmlns="http://www.w3.org/2000/svg"
                  width="16"
                  height="16"
                  viewBox="0 0 24 24"
                  fill="none"
                  stroke="currentColor"
                  strokeWidth="2"
                  strokeLinecap="round"
                  strokeLinejoin="round"
                >
                  <circle cx="11" cy="11" r="8"></circle>
                  <line x1="8" y1="11" x2="14" y2="11"></line>
                </svg>
              </button>
              <div class="zoom-divider"></div>
              <button class="zoom-button" id="zoom-reset">
                <svg
                  xmlns="http://www.w3.org/2000/svg"
                  width="16"
                  height="16"
                  viewBox="0 0 24 24"
                  fill="none"
                  stroke="currentColor"
                  strokeWidth="2"
                  strokeLinecap="round"
                  strokeLinejoin="round"
                >
                  <path
                    d="M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8"
                  ></path>
                  <path d="M3 3v5h5"></path>
                </svg>
              </button>
            </div>

            <div class="map-scroll" id="map-scroll">
              <div class="map-content" id="map-content">
                <!-- Aquí va el SVG del mapa -->
                <svg
                  id="expo-map"
                  width="1460.5"
                  height="600"
                  viewBox="0 -380 1342.5 770"
                >
                  <!-- Pasillos -->
                  <g class="corridors">
                    <!-- Pasillo D -->
                    <rect
                      x="0"
                      y="0"
                      width="1266.5"
                      height="30"
                      class="corridor"
                    />
                    <text
                      x="671.25"
                      y="19"
                      textAnchor="middle"
                      class="corridor-label"
                    >
                      Pasillo D
                    </text>

                    <!-- Pasillo C -->
                    <rect
                      x="0"
                      y="76.75"
                      width="1266.5"
                      height="30"
                      class="corridor"
                    />
                    <text
                      x="671.25"
                      y="95.75"
                      textAnchor="middle"
                      class="corridor-label"
                    >
                      Pasillo C
                    </text>

                    <!-- Pasillo B -->
                    <rect
                      x="0"
                      y="153.5"
                      width="1266.5"
                      height="30"
                      class="corridor"
                    />
                    <text
                      x="671.25"
                      y="172.5"
                      textAnchor="middle"
                      class="corridor-label"
                    >
                      Pasillo B
                    </text>

                    <!-- Pasillo A -->
                    <rect
                      x="0"
                      y="230.25"
                      width="1266.5"
                      height="30"
                      class="corridor"
                    />
                    <text
                      x="671.25"
                      y="249.25"
                      textAnchor="middle"
                      class="corridor-label"
                    >
                      Pasillo A
                    </text>

                    <!-- Pasillo E -->
                    <rect
                      x="0"
                      y="-193"
                      width="1266.5"
                      height="30"
                      class="corridor"
                    />
                    <text
                      x="671.25"
                      y="-174"
                      textAnchor="middle"
                      class="corridor-label"
                    >
                      Pasillo E
                    </text>
                  </g>

                  <!-- Stands Fila A -->
                  <g class="stands-row" id="row-a">
                    <!-- A1 - A18 se generarán con JavaScript -->
                  </g>

                  <!-- Stands Fila B -->
                  <g class="stands-row" id="row-b">
                    <!-- B1 - B18 se generarán con JavaScript -->
                  </g>

                  <!-- Stands Fila C -->
                  <g class="stands-row" id="row-c">
                    <!-- C1 - C18 se generarán con JavaScript -->
                  </g>

                  <!-- Módulos a la izquierda -->
                  <g class="left-modules" id="left-modules">
                    <!-- Se generarán con JavaScript -->
                  </g>

                  <!-- Módulos a la derecha -->
                  <g class="right-modules" id="right-modules">
                    <!-- Se generarán con JavaScript -->
                  </g>

                  <!-- Módulo 2100 en forma de L -->
                  <g class="module-2100">
                    <rect
                      x="1355.911"
                      y="266"
                      width="30"
                      height="74.012"
                      class="module yellow"
                      data-stand-id="2100"
                    />
                    <rect
                      x="1318.911"
                      y="310.012"
                      width="67"
                      height="30"
                      class="module yellow"
                      data-stand-id="2100"
                    />
                    <text
                      x="1370.911"
                      y="303"
                      textAnchor="middle"
                      class="stand-label"
                    >
                      2100
                    </text>
                  </g>

                  <!-- Módulos inferiores -->
                  <g class="bottom-modules">
                    <!-- Módulo 2102 -->
                    <rect
                      x="1290.911"
                      y="310"
                      width="30"
                      height="30"
                      class="module yellow"
                      data-stand-id="2102"
                    />
                    <text
                      x="1305.911"
                      y="327"
                      textAnchor="middle"
                      class="stand-label"
                    >
                      2102
                    </text>

                    <!-- Módulo 2000 -->
                    <rect
                      x="1230"
                      y="310"
                      width="60"
                      height="30"
                      class="module yellow"
                      data-stand-id="2000"
                    />
                    <text
                      x="1257"
                      y="327"
                      textAnchor="middle"
                      class="stand-label"
                    >
                      2000
                    </text>

                    <!-- Módulo 1900 -->
                    <rect
                      x="1180"
                      y="310"
                      width="30"
                      height="30"
                      class="module yellow"
                      data-stand-id="1900"
                    />
                    <text
                      x="1195"
                      y="327"
                      textAnchor="middle"
                      class="stand-label"
                    >
                      1900
                    </text>
                  </g>

                  <!-- Módulo Z1 -->
                  <rect
                    x="763.25"
                    y="-163"
                    width="46.25"
                    height="163"
                    class="module yellow"
                    data-stand-id="1421"
                  />
                  <text
                    x="784"
                    y="-81.5"
                    textAnchor="middle"
                    class="stand-label"
                  >
                    1421
                  </text>

                  <!-- Módulos del Pasillo D (superiores) -->
                  <g class="pasillo-d-modules" id="pasillo-d-modules">
                    <!-- Se generarán con JavaScript -->
                  </g>

                  <!-- Módulos del Pasillo E (superiores) -->
                  <g class="pasillo-e-modules" id="pasillo-e-modules">
                    <!-- Se generarán con JavaScript -->
                  </g>

                  <!-- Módulos superiores adicionales (encima del pasillo E) -->
                  <g class="top-additional-modules" id="top-modules">
                    <!-- Se generarán con JavaScript -->
                  </g>

                  <!-- Módulos inferiores adicionales (debajo del pasillo A) -->
                  <g class="bottom-additional-modules" id="bottom-modules">
                    <!-- Se generarán con JavaScript -->
                  </g>
                </svg>
              </div>
            </div>
          </div>
        </div>

        <!-- Tooltip -->
        <div class="tooltip" id="tooltip"></div>
      </div>

      <div class="search-container">
        <input
          type="text"
          class="search-input"
          id="module-search"
          placeholder="Buscar stand por número o nombre..."
        />
      </div>

      <div class="filters">
        <button class="filter-btn active" data-filter="all">Todos</button>
        <button class="filter-btn red" data-filter="red">Marketing</button>
        <button class="filter-btn green" data-filter="green">
          Retail marketing/Visual
        </button>
        <button class="filter-btn orange" data-filter="orange">
          Equipos de impresion
        </button>
        <button class="filter-btn yellow" data-filter="yellow">
          Promocionales
        </button>
      </div>

      <div id="modules-container">
        <div class="loading">Cargando módulos...</div>
      </div>

      <a href="#" class="back-to-top" id="back-to-top">↑</a>

      <!-- Botón de rotación para vista horizontal -->
      <button class="rotate-button" id="rotate-button">
        <svg
          xmlns="http://www.w3.org/2000/svg"
          width="24"
          height="24"
          viewBox="0 0 24 24"
          fill="none"
          stroke="currentColor"
          strokeWidth="2"
          strokeLinecap="round"
          strokeLinejoin="round"
        >
          <path d="M3 2v7h7"></path>
          <path d="M21 12A9 9 0 0 0 6 5.3L3 8"></path>
          <path d="M21 22v-7h-7"></path>
          <path d="M3 12a9 9 0 0 0 15 6.7l3-2.7"></path>
        </svg>
      </button>
    </div>

    <script>
      // Código para el mapa interactivo
      // Definición de los módulos
      const moduleMap = {
        A1: { name: "415", color: "red" },
        A2: { name: "515", color: "green" },
        A3: { name: "615", color: "green" },
        A4: { name: "715", color: "green" },
        A5: { name: "815", color: "green" },
        A6: { name: "915", color: "orange" },
        A7: { name: "1015", color: "orange" },
        A8: { name: "1105", color: "orange" },
        A9: { name: "1205", color: "orange" },
        A10: { name: "1216", color: "yellow" },
        A11: { name: "1315", color: "yellow" },
        A12: { name: "1415", color: "yellow" },
        A13: { name: "1515", color: "yellow" },
        A14: { name: "1615", color: "yellow" },
        A15: { name: "1715", color: "yellow" },
        A16: { name: "1815", color: "yellow" },
        A17: { name: "1905", color: "yellow" },
        B1: { name: "409", color: "red" },
        B2: { name: "509", color: "green" },
        B3: { name: "609", color: "green" },
        B4: { name: "709", color: "green" },
        B5: { name: "809", color: "green" },
        B6: { name: "909", color: "orange" },
        B7: { name: "1005", color: "orange" },
        B8: { name: "1105", color: "orange" },
        B9: { name: "1205", color: "orange" },
        B10: { name: "1210", color: "yellow" },
        B11: { name: "1309", color: "yellow" },
        B12: { name: "1409", color: "yellow" },
        B13: { name: "1509", color: "yellow" },
        B14: { name: "1609", color: "yellow" },
        B15: { name: "1709", color: "yellow" },
        B16: { name: "1809", color: "yellow" },
        B17: { name: "1905", color: "yellow" },
        C1: { name: "405", color: "red" },
        C2: { name: "505", color: "green" },
        C3: { name: "605", color: "green" },
        C4: { name: "705", color: "green" },
        C5: { name: "805", color: "green" },
        C6: { name: "905", color: "orange" },
        C7: { name: "1005", color: "orange" },
        C8: { name: "1105", color: "orange" },
        C9: { name: "1205", color: "orange" },
        C10: { name: "1206", color: "yellow" },
        C11: { name: "1305", color: "yellow" },
        C12: { name: "1405", color: "yellow" },
        C13: { name: "1505", color: "yellow" },
        C14: { name: "1605", color: "yellow" },
        C15: { name: "1705", color: "yellow" },
        C16: { name: "1805", color: "yellow" },
        C17: { name: "1905", color: "yellow" },
      };

      // Módulos a la izquierda
      const baseY = -283;
      const leftModules = [
        { name: "148", width: 30.125, height: 30.505, color: "red" },
        { name: "146", width: 30.125, height: 30.505, color: "red" },
        { name: "142", width: 30.125, height: 60, color: "red" },
        { name: "140", width: 30.125, height: 30.505, color: "red" },
        { name: "136", width: 30.125, height: 60, color: "red" },
        { name: "134", width: 30.125, height: 30.505, color: "red" },
        { name: "132", width: 30.125, height: 30.505, color: "red" },
        { name: "130", width: 30.125, height: 30.505, color: "red" },
        { name: "128", width: 30.125, height: 30.505, color: "red" },
        { name: "126", width: 30.125, height: 30.505, color: "red" },
        { name: "124", width: 30.125, height: 30.505, color: "red" },
        { name: "122", width: 30.125, height: 30.505, color: "red" },
        { name: "120", width: 30.125, height: 30.505, color: "red" },
        { name: "116", width: 30.125, height: 60, color: "red" },
        { name: "114", width: 30.125, height: 30.505, color: "red" },
      ];

      // Módulos a la derecha
      const rightModules = [
        { name: "2139", width: 30, height: 67, color: "yellow" },
        { name: "2137", width: 30, height: 29, color: "yellow" },
        { name: "2135", width: 30, height: 29, color: "yellow" },
        { name: "2133", width: 30, height: 29, color: "yellow" },
        { name: "2131", width: 30, height: 29, color: "yellow" },
        { name: "2129", width: 30, height: 29, color: "yellow" },
        { name: "2127", width: 30, height: 29, color: "yellow" },
        { name: "2125", width: 30, height: 29, color: "yellow" },
        { name: "2123", width: 30, height: 29, color: "yellow" },
        { name: "2121", width: 30, height: 29, color: "yellow" },
        { name: "2119", width: 30, height: 29, color: "yellow" },
        { name: "2115", width: 30, height: 67, color: "yellow" },
        { name: "2113", width: 30, height: 29, color: "yellow" },
        { name: "2111", width: 30, height: 29, color: "yellow" },
        { name: "2107", width: 30, height: 67, color: "yellow" },
      ];

      // Módulos superiores
      const topModules = [
        {
          x: 673.536,
          y: -350,
          width: 30,
          height: 30,
          color: "orange",
          id: "1241",
        },
        {
          x: 703.536,
          y: -350,
          width: 30,
          height: 30,
          color: "orange",
          id: "1343",
        },
        {
          x: 733.536,
          y: -350,
          width: 30,
          height: 30,
          color: "orange",
          id: "1342",
        },
        {
          x: 763.536,
          y: -350,
          width: 50,
          height: 30,
          color: "orange",
          id: "1442",
        },
        {
          x: 843.536,
          y: -350,
          width: 30,
          height: 30,
          color: "yellow",
          id: "1441",
        },
        {
          x: 873.536,
          y: -350,
          width: 50,
          height: 30,
          color: "yellow",
          id: "1543",
        },
        {
          x: 923.536,
          y: -350,
          width: 50,
          height: 30,
          color: "yellow",
          id: "1642",
        },
        {
          x: 993.536,
          y: -350,
          width: 30,
          height: 30,
          color: "yellow",
          id: "1641",
        },
        {
          x: 1023.536,
          y: -350,
          width: 30,
          height: 30,
          color: "yellow",
          id: "1743",
        },
        {
          x: 1053.536,
          y: -350,
          width: 30,
          height: 30,
          color: "yellow",
          id: "1742",
        },
        {
          x: 1083.536,
          y: -350,
          width: 30,
          height: 30,
          color: "yellow",
          id: "1741",
        },
        {
          x: 1113.536,
          y: -350,
          width: 30,
          height: 30,
          color: "yellow",
          id: "1843",
        },
        {
          x: 1143.536,
          y: -350,
          width: 30,
          height: 30,
          color: "yellow",
          id: "1842",
        },
        {
          x: 1173.536,
          y: -350,
          width: 30,
          height: 30,
          color: "yellow",
          id: "1841",
        },
        {
          x: 1295.536,
          y: -350,
          width: 30,
          height: 30,
          color: "yellow",
          id: "2141",
        },
        {
          x: 1325.536,
          y: -350,
          width: 30,
          height: 30,
          color: "yellow",
          id: "2140",
        },
      ];

      // Módulos inferiores
      const bottomModules = [
        { x: 37, y: 310, width: 30, height: 30, color: "red", id: "102" },
        { x: 67, y: 310, width: 30, height: 30, color: "red", id: "100" },
        { x: 210, y: 310, width: 30, height: 30, color: "green", id: "600" },
        { x: 240, y: 310, width: 30, height: 30, color: "green", id: "601" },
        { x: 270, y: 310, width: 30, height: 30, color: "green", id: "602" },
        { x: 320, y: 310, width: 30, height: 30, color: "green", id: "700" },
        { x: 409, y: 310, width: 30, height: 30, color: "orange", id: "800" },
        { x: 440, y: 310, width: 30, height: 30, color: "orange", id: "801" },
        { x: 470, y: 310, width: 90, height: 30, color: "orange", id: "802" },
        { x: 560, y: 310, width: 70, height: 30, color: "orange", id: "1100" },
        { x: 630, y: 310, width: 30, height: 30, color: "orange", id: "1102" },
        { x: 660, y: 310, width: 30, height: 30, color: "orange", id: "1200" },
        { x: 690, y: 310, width: 30, height: 30, color: "orange", id: "1201" },
        { x: 720, y: 310, width: 30, height: 30, color: "orange", id: "1202" },
        { x: 750, y: 310, width: 30, height: 30, color: "orange", id: "1300" },
        { x: 800, y: 310, width: 50, height: 30, color: "yellow", id: "1400" },
        { x: 870, y: 310, width: 60, height: 30, color: "yellow", id: "1500" },
        { x: 1055, y: 310, width: 90, height: 30, color: "yellow", id: "1700" },
        { x: 1145, y: 310, width: 30, height: 30, color: "yellow", id: "1800" },
      ];

      // Definición de los grupos del pasillo D
      const pasilloDGroups = [
        // Grupo X
        {
          transform: "translate(0, -140.747)",
          modules: [
            {
              x: 0,
              y: 0,
              width: 23.375,
              height: 58.4375,
              color: "red",
              id: "329",
            },
            {
              x: 23.375,
              y: 0,
              width: 23.375,
              height: 58.4375,
              color: "red",
              id: "430",
            },
            {
              x: 0,
              y: 58.4375,
              width: 23.375,
              height: 23.375,
              color: "red",
              id: "325",
            },
            {
              x: 23.375,
              y: 58.4375,
              width: 23.375,
              height: 23.375,
              color: "red",
              id: "426",
            },
            {
              x: 0.25,
              y: 81.8125,
              width: 46.25,
              height: 58.9345,
              color: "red",
              id: "321",
            },
          ],
        },
        // Grupo Y
        {
          transform: "translate(76.75, -140.25)",
          modules: [
            {
              x: 0,
              y: 0,
              width: 23.375,
              height: 58.4375,
              color: "green",
              id: "429",
            },
            {
              x: 23.375,
              y: 0,
              width: 23.375,
              height: 58.4375,
              color: "green",
              id: "530",
            },
            {
              x: 0,
              y: 58.4375,
              width: 23.375,
              height: 23.375,
              color: "green",
              id: "425",
            },
            {
              x: 23.375,
              y: 58.4375,
              width: 23.375,
              height: 23.375,
              color: "green",
              id: "526",
            },
            {
              x: 0,
              y: 81.8125,
              width: 23.375,
              height: 58.4375,
              color: "green",
              id: "421",
            },
            {
              x: 23.375,
              y: 81.8125,
              width: 23.375,
              height: 58.4375,
              color: "green",
              id: "522",
            },
          ],
        },
        // Grupo A
        {
          transform: "translate(153.5, -140.25)",
          modules: [
            {
              x: 0.25,
              y: 0,
              width: 46.25,
              height: 58.9345,
              color: "green",
              id: "529",
            },
            {
              x: 0,
              y: 58.9345,
              width: 23.375,
              height: 23.375,
              color: "green",
              id: "525",
            },
            {
              x: 23.375,
              y: 58.9345,
              width: 23.375,
              height: 23.375,
              color: "green",
              id: "626",
            },
            {
              x: 0,
              y: 82.3095,
              width: 23.375,
              height: 58.4375,
              color: "green",
              id: "521",
            },
            {
              x: 23.375,
              y: 82.3095,
              width: 23.375,
              height: 58.4375,
              color: "green",
              id: "622",
            },
          ],
        },
        // Grupo A invertido
        {
          transform: "translate(230.25, -140.747)",
          modules: [
            {
              x: 0,
              y: 0,
              width: 23.375,
              height: 58.4375,
              color: "green",
              id: "629",
            },
            {
              x: 23.375,
              y: 0,
              width: 23.375,
              height: 58.4375,
              color: "green",
              id: "730",
            },
            {
              x: 0,
              y: 58.4375,
              width: 23.375,
              height: 23.375,
              color: "green",
              id: "625",
            },
            {
              x: 23.375,
              y: 58.4375,
              width: 23.375,
              height: 23.375,
              color: "green",
              id: "726",
            },
            {
              x: 0.25,
              y: 81.8125,
              width: 46.25,
              height: 58.9345,
              color: "green",
              id: "621",
            },
          ],
        },
        // Grupo Y adicional
        {
          transform: "translate(307, -140.25)",
          modules: [
            {
              x: 0,
              y: 0,
              width: 46.25,
              height: 140.25,
              color: "green",
              id: "821",
            },
          ],
        },

        // Módulo 821
        {
          standalone: true,
          x: 383.75,
          y: -140.25,
          width: 46.25,
          height: 58.9345,
          color: "orange",
          id: "929",
        },
        // Módulo 1328
        {
          standalone: true,
          x: 383.75,
          y: -82,
          width: 23.375,
          height: 27,
          color: "orange",
          id: "925",
        },
        // Módulo 921
        {
          standalone: true,
          x: 383.75,
          y: -55,
          width: 23.375,
          height: 55,
          color: "orange",
          id: "921",
        },
        // Módulo 1022
        {
          standalone: true,
          x: 407.75,
          y: -55,
          width: 23.375,
          height: 55,
          color: "orange",
          id: "1022",
        },

        // Módulo 1328
        {
          standalone: true,
          x: 407.125,
          y: -82,
          width: 23.375,
          height: 27,
          color: "orange",
          id: "1026",
        },

        // Grupo Y naranja
        // Grupo Y naranja 2
        {
          transform: "translate(460.5, -140.25)",
          modules: [
            {
              x: 0,
              y: 0,
              width: 23.375,
              height: 58.4375,
              color: "orange",
              id: "1029",
            },
            {
              x: 23.375,
              y: 0,
              width: 23.375,
              height: 58.4375,
              color: "orange",
              id: "1130",
            },
            {
              x: 0,
              y: 58.4375,
              width: 23.375,
              height: 23.375,
              color: "orange",
              id: "1025",
            },
            {
              x: 23.375,
              y: 58.4375,
              width: 23.375,
              height: 23.375,
              color: "orange",
              id: "1126",
            },
            {
              x: 0,
              y: 81.8125,
              width: 23.375,
              height: 58.4375,
              color: "orange",
              id: "1021",
            },
            {
              x: 23.375,
              y: 81.8125,
              width: 23.375,
              height: 58.4375,
              color: "orange",
              id: "1122",
            },
          ],
        },
        // Grupo B
        {
          transform: "translate(535, -141.244)",
          modules: [
            {
              x: 0.25,
              y: 0,
              width: 46.25,
              height: 58.9345,
              color: "orange",
              id: "1129",
            },
            {
              x: 0,
              y: 58.9345,
              width: 23.375,
              height: 23.375,
              color: "orange",
              id: "1025",
            },
            {
              x: 23.375,
              y: 58.9345,
              width: 23.375,
              height: 23.375,
              color: "orange",
              id: "1126",
            },
            {
              x: 0.25,
              y: 82.3095,
              width: 46.25,
              height: 58.9345,
              color: "orange",
              id: "1121",
            },
          ],
        },
        // Módulo 1228
        {
          standalone: true,
          x: 610,
          y: -141,
          width: 23.375,
          height: 33,
          color: "yellow",
          id: "1228",
        },
        // Módulo 1227
        {
          standalone: true,
          x: 610,
          y: -107.875,
          width: 23.375,
          height: 27,
          color: "yellow",
          id: "1227",
        },
        // Módulo 1225
        {
          standalone: true,
          x: 610,
          y: -80.5,
          width: 23.375,
          height: 27,
          color: "yellow",
          id: "1225",
        },
        // Módulo 1223
        {
          standalone: true,
          x: 610,
          y: -54,
          width: 23.375,
          height: 27,
          color: "yellow",
          id: "1223",
        },
        // Módulo 1221
        {
          standalone: true,
          x: 610,
          y: -27,
          width: 23.375,
          height: 27,
          color: "yellow",
          id: "1221",
        },
        // Módulo 1328
        {
          standalone: true,
          x: 633,
          y: -141,
          width: 23.375,
          height: 60,
          color: "yellow",
          id: "1328",
        },
        // Módulo 1326
        {
          standalone: true,
          x: 633,
          y: -80.5,
          width: 23.375,
          height: 27,
          color: "yellow",
          id: "1326",
        },
        // Módulo 1324
        {
          standalone: true,
          x: 633,
          y: -54,
          width: 23.375,
          height: 27,
          color: "yellow",
          id: "1324",
        },
        // Módulo 1322
        {
          standalone: true,
          x: 633,
          y: -27,
          width: 23.375,
          height: 27,
          color: "yellow",
          id: "1322",
        },

        // Grupo Y amarillo
        {
          transform: "translate(686, -140.25)",
          modules: [
            {
              x: 0,
              y: 0,
              width: 23.375,
              height: 58.4375,
              color: "yellow",
              id: "1329",
            },
            {
              x: 23.375,
              y: 0,
              width: 23.375,
              height: 58.4375,
              color: "yellow",
              id: "1430",
            },
            {
              x: 0,
              y: 58.4375,
              width: 23.375,
              height: 23.375,
              color: "yellow",
              id: "1325",
            },
            {
              x: 23.375,
              y: 58.4375,
              width: 23.375,
              height: 23.375,
              color: "yellow",
              id: "1426",
            },
            {
              x: 0,
              y: 81.8125,
              width: 23.375,
              height: 58.4375,
              color: "yellow",
              id: "1321",
            },
            {
              x: 23.375,
              y: 81.8125,
              width: 23.375,
              height: 58.4375,
              color: "yellow",
              id: "1422",
            },
          ],
        },
        // Grupo Y amarillo 2
        {
          transform: "translate(839, -140.25)",
          modules: [
            {
              x: 0,
              y: 0,
              width: 23.375,
              height: 58.4375,
              color: "yellow",
              id: "1529",
            },
            {
              x: 23.375,
              y: 0,
              width: 23.375,
              height: 58.4375,
              color: "yellow",
              id: "1630",
            },
            {
              x: 0,
              y: 58.4375,
              width: 23.375,
              height: 23.375,
              color: "yellow",
              id: "1525",
            },
            {
              x: 23.375,
              y: 58.4375,
              width: 23.375,
              height: 23.375,
              color: "yellow",
              id: "1626",
            },
            {
              x: 0,
              y: 81.8125,
              width: 23.375,
              height: 58.4375,
              color: "yellow",
              id: "1521",
            },
            {
              x: 23.375,
              y: 81.8125,
              width: 23.375,
              height: 58.4375,
              color: "yellow",
              id: "1622",
            },
          ],
        },
        // Grupo B amarillo
        {
          transform: "translate(915, -141.244)",
          modules: [
            {
              x: 0.25,
              y: 0,
              width: 46.25,
              height: 58.9345,
              color: "yellow",
              id: "1629",
            },
            {
              x: 0,
              y: 58.9345,
              width: 23.375,
              height: 23.375,
              color: "yellow",
              id: "1625",
            },
            {
              x: 23.375,
              y: 58.9345,
              width: 23.375,
              height: 23.375,
              color: "yellow",
              id: "1726",
            },
            {
              x: 0.25,
              y: 82.3095,
              width: 46.25,
              height: 58.9345,
              color: "yellow",
              id: "1621",
            },
          ],
        },
        // Grupo X amarillo
        {
          transform: "translate(990, -140.747)",
          modules: [
            {
              x: 0,
              y: 0,
              width: 23.375,
              height: 58.4375,
              color: "yellow",
              id: "1729",
            },
            {
              x: 23.375,
              y: 0,
              width: 23.375,
              height: 58.4375,
              color: "yellow",
              id: "1830",
            },
            {
              x: 0,
              y: 58.4375,
              width: 23.375,
              height: 23.375,
              color: "yellow",
              id: "1725",
            },
            {
              x: 23.375,
              y: 58.4375,
              width: 23.375,
              height: 23.375,
              color: "yellow",
              id: "1826",
            },
            {
              x: 0.25,
              y: 81.8125,
              width: 46.25,
              height: 58.9345,
              color: "yellow",
              id: "1721",
            },
          ],
        },
        // Grupo Ñ
        {
          transform: "translate(1068, -140.747)",
          modules: [
            {
              x: 0.25,
              y: 0,
              width: 46.25,
              height: 58.9345,
              color: "yellow",
              id: "1829",
            },
            {
              x: 0.25,
              y: 58.9345,
              width: 46.25,
              height: 81.8125,
              color: "yellow",
              id: "1821",
            },
          ],
        },
        // Grupo P
        {
          transform: "translate(1144, -140.747)",
          modules: [
            {
              x: 0,
              y: 0,
              width: 23.375,
              height: 76.8172,
              color: "yellow",
              id: "1929",
            },
            {
              x: 0,
              y: 76.8172,
              width: 23.125,
              height: 63.4328,
              color: "yellow",
              id: "1921",
            },
          ],
        },
        // Grupo PR
        {
          transform: "translate(1167, -141)",
          modules: [
            {
              x: 0,
              y: 0,
              width: 23.125,
              height: 54.1158,
              color: "yellow",
              id: "2030",
            },
            {
              x: 0,
              y: 54.1158,
              width: 23.375,
              height: 23.375,
              color: "yellow",
              id: "2026",
            },
            {
              x: 0,
              y: 77.4908,
              width: 23.125,
              height: 63.4328,
              color: "yellow",
              id: "2022",
            },
          ],
        },
        // Nuevo módulo al final del pasillo D
        {
          transform: "translate(1400, 0)", // Ajusta la posición según el final del pasillo
          modules: [
            {
              x: -179,
              y: -63.5,
              width: 23.125,
              height: 63.4328,
              color: "yellow",
              id: "2021",
            },
          ],
        },
        {
          transform: "translate(1400, 0)",
          modules: [
            {
              x: -179,
              y: -140.5,
              width: 23.375,
              height: 53.7,
              color: "yellow",
              id: "2029",
            },
          ],
        },
        {
          transform: "translate(1400, 0)",
          modules: [
            {
              x: -179,
              y: -86.5,
              width: 23.125,
              height: 23.125,
              color: "yellow",
              id: "2025",
            },
          ],
        },
        {
          transform: "translate(1400, 0)",
          modules: [
            {
              x: -156,
              y: -140.5,
              width: 23.125,
              height: 30.125,
              color: "yellow",
              id: "2130",
            },
          ],
        },
        {
          transform: "translate(1400, 0)",
          modules: [
            {
              x: -156,
              y: -110.5,
              width: 23.375,
              height: 23.375,
              color: "yellow",
              id: "2128",
            },
          ],
        },
        // Nuevo módulo al final del pasillo D
        {
          transform: "translate(1400, 0)", // Ajusta la posición según el final del pasillo
          modules: [
            {
              x: -156,
              y: -87,
              width: 23.375,
              height: 87,
              color: "yellow",
              id: "2122",
            },
          ],
        },
      ];

      // Definición de los grupos del pasillo E
      const pasilloEGroups = [
        // Grupo N rojo
        {
          transform: "translate(0, -283)",
          modules: [
            {
              x: 0,
              y: 0,
              width: 23.125,
              height: 26.505,
              color: "red",
              id: "337",
            },
            {
              x: 23.125,
              y: 0,
              width: 23.125,
              height: 26.505,
              color: "red",
              id: "438",
            },
            {
              x: 0,
              y: 26.505,
              width: 23.125,
              height: 63.4328,
              color: "red",
              id: "333",
            },
            {
              x: 23.125,
              y: 26.505,
              width: 23.125,
              height: 63.4328,
              color: "red",
              id: "434",
            },
          ],
        },
        // Grupo N verde
        {
          transform: "translate(76.25, -283)",
          modules: [
            {
              x: 0,
              y: 0,
              width: 23.125,
              height: 26.505,
              color: "green",
              id: "437",
            },
            {
              x: 23.125,
              y: 0,
              width: 23.125,
              height: 26.505,
              color: "green",
              id: "538",
            },
            {
              x: 0,
              y: 26.505,
              width: 23.125,
              height: 63.4328,
              color: "green",
              id: "433",
            },
            {
              x: 23.125,
              y: 26.505,
              width: 23.125,
              height: 63.4328,
              color: "green",
              id: "534",
            },
          ],
        },
        // Módulo publicitatalks
        {
          standalone: true,
          x: 152.5,
          y: -311.5189,
          width: 135.5094,
          height: 118.5189,
          color: "",
          id: "publicitatalks",
        },
        // Módulos 733/737
        {
          transform: "translate(305, -310.0898)",
          modules: [
            {
              x: 0,
              y: 90.2613,
              width: 47.0879,
              height: 27.0412,
              color: "green",
              id: "733",
            },
            {
              x: 0,
              y: 0,
              width: 47.0879,
              height: 117.2613,
              color: "green",
              id: "833",
            },
          ],
        },
        // Módulo 833
        {
          standalone: true,
          x: 381.25,
          y: -310.0898,
          width: 46.125,
          height: 117.0898,
          color: "orange",
          id: "933",
        },
        // Grupo N naranja
        // Grupo N naranja 2
        {
          transform: "translate(457.5, -283)",
          modules: [
            {
              x: 0,
              y: 0,
              width: 23.125,
              height: 26.505,
              color: "orange",
              id: "941",
            },
            {
              x: 23.125,
              y: 0,
              width: 23.125,
              height: 26.505,
              color: "orange",
              id: "1138",
            },
            {
              x: 0,
              y: 26.505,
              width: 23.125,
              height: 63.4328,
              color: "orange",
              id: "1033",
            },
            {
              x: 23.125,
              y: 26.505,
              width: 23.125,
              height: 33.4328,
              color: "orange",
              id: "1041",
            },
            {
              x: 23.125,
              y: 60,
              width: 23.125,
              height: 30,
              color: "orange",
              id: "1042",
            },
          ],
        },
        // Módulo 1133
        {
          standalone: true,
          x: 533.75,
          y: -310,
          width: 46.125,
          height: 117.0898,
          color: "orange",
          id: "1133",
        },
        // Grupo N amarillo
        {
          transform: "translate(609, -283)",
          modules: [
            {
              x: 0,
              y: 0,
              width: 23.125,
              height: 26.505,
              color: "yellow",
              id: "1237",
            },
            {
              x: 23.125,
              y: 0,
              width: 23.125,
              height: 26.505,
              color: "yellow",
              id: "1338",
            },
            {
              x: 0,
              y: 26.505,
              width: 23.125,
              height: 63.4328,
              color: "yellow",
              id: "1233",
            },
            {
              x: 23.125,
              y: 26.505,
              width: 23.125,
              height: 63.4328,
              color: "yellow",
              id: "1334",
            },
          ],
        },
        {
          transform: "translate(687, -283)",
          modules: [
            {
              x: 0,
              y: 0,
              width: 23.125,
              height: 26.505,
              color: "yellow",
              id: "1337",
            },
            {
              x: 23.125,
              y: 0,
              width: 23.125,
              height: 26.505,
              color: "yellow",
              id: "1438",
            },
            {
              x: 0,
              y: 26.505,
              width: 23.125,
              height: 63.4328,
              color: "yellow",
              id: "1333",
            },
            {
              x: 23.125,
              y: 26.505,
              width: 23.125,
              height: 63.4328,
              color: "yellow",
              id: "1434",
            },
          ],
        },

        // Grupo S
        {
          transform: "translate(762.5, -256.2829)",
          modules: [
            {
              x: 0,
              y: 0,
              width: 23.2855,
              height: 31.6415,
              color: "yellow",
              id: "1437",
            },
            {
              x: 0,
              y: 31.6415,
              width: 23.2855,
              height: 31.6415,
              color: "yellow",
              id: "1433",
            },
            {
              x: 23.2855,
              y: 0,
              width: 23.375,
              height: 63.2829,
              color: "yellow",
              id: "1536",
            },
          ],
        },
        // Grupo N amarillo 2
        {
          transform: "translate(843.75, -283)",
          modules: [
            {
              x: 0,
              y: 0,
              width: 23.125,
              height: 26.505,
              color: "yellow",
              id: "1537",
            },
            {
              x: 23.125,
              y: 0,
              width: 23.125,
              height: 26.505,
              color: "yellow",
              id: "1638",
            },
            {
              x: 0,
              y: 26.505,
              width: 23.125,
              height: 63.4328,
              color: "yellow",
              id: "1533",
            },
            {
              x: 23.125,
              y: 26.505,
              width: 23.125,
              height: 63.4328,
              color: "yellow",
              id: "1634",
            },
          ],
        },
        // Grupo J
        {
          transform: "translate(917.661, -283)",
          modules: [
            {
              x: 0,
              y: 0,
              width: 23.125,
              height: 89.9378,
              color: "yellow",
              id: "1633",
            },
            {
              x: 23.125,
              y: 26.505,
              width: 23.125,
              height: 63.4328,
              color: "yellow",
              id: "1734",
            },
            {
              x: 23.125,
              y: 0,
              width: 23.125,
              height: 26.505,
              color: "yellow",
              id: "1738",
            },
          ],
        },
        // Grupo N amarillo 3
        {
          transform: "translate(990.661, -283)",
          modules: [
            {
              x: 0,
              y: 0,
              width: 23.125,
              height: 26.505,
              color: "yellow",
              id: "1737",
            },
            {
              x: 23.125,
              y: 0,
              width: 23.125,
              height: 26.505,
              color: "yellow",
              id: "1838",
            },
            {
              x: 0,
              y: 26.505,
              width: 23.125,
              height: 63.4328,
              color: "yellow",
              id: "1733",
            },
            {
              x: 23.125,
              y: 26.505,
              width: 23.125,
              height: 63.4328,
              color: "yellow",
              id: "1834",
            },
          ],
        },
        // Grupo N amarillo 4
        {
          transform: "translate(1067.911, -283)",
          modules: [
            {
              x: 0,
              y: 0,
              width: 23.125,
              height: 26.505,
              color: "yellow",
              id: "1837",
            },
            {
              x: 23.125,
              y: 0,
              width: 23.125,
              height: 26.505,
              color: "yellow",
              id: "1938",
            },
            {
              x: 0,
              y: 26.505,
              width: 23.125,
              height: 63.4328,
              color: "yellow",
              id: "1833",
            },
            {
              x: 23.125,
              y: 26.505,
              width: 23.125,
              height: 63.4328,
              color: "yellow",
              id: "1934",
            },
          ],
        },
        // Módulo 1933
        {
          standalone: true,
          x: 1144.161,
          y: -310.0898,
          width: 46.125,
          height: 117.0898,
          color: "yellow",
          id: "1933",
        },
        // Grupo N amarillo 5
        {
          transform: "translate(1220.411, -283)",
          modules: [
            {
              x: 0,
              y: 0,
              width: 23.125,
              height: 26.505,
              color: "yellow",
              id: "1937",
            },
            {
              x: 23.125,
              y: 0,
              width: 23.125,
              height: 26.505,
              color: "yellow",
              id: "2038",
            },
            {
              x: 0,
              y: 26.505,
              width: 23.125,
              height: 63.4328,
              color: "yellow",
              id: "1933",
            },
            {
              x: 23.125,
              y: 26.505,
              width: 23.125,
              height: 63.4328,
              color: "yellow",
              id: "2034",
            },
          ],
        },
      ];

      // Variables globales
      let selectedStand = null;
      let zoomLevel = 1;
      let position = { x: 0, y: 0 };
      let isDragging = false;
      let startX, startY, startPosX, startPosY;
      let isLandscapeMode = false;
      let mapInitialized = false;
      let landscapeContainer = null;

      // Elementos DOM
      const mapContent = document.getElementById("map-content");
      const mapScroll = document.getElementById("map-scroll");
      const tooltip = document.getElementById("tooltip");
      const standInfo = document.getElementById("stand-info");
      const zoomLevelEl = document.getElementById("zoom-level");
      const searchForm = document.getElementById("map-search-form");
      const searchInput = document.getElementById("map-search-input");
      const rotateButton = document.getElementById("rotate-button");
      const interactiveMapContainer = document.getElementById(
        "interactive-map-container"
      );
      const toggleMapBtn = document.getElementById("toggle-map-btn");
      const modulesContainer = document.getElementById("modules-container");
      const moduleSearchInput = document.getElementById("module-search");
      const filterButtons = document.querySelectorAll(".filter-btn");
      const backToTop = document.getElementById("back-to-top");

      // Función para crear un elemento SVG
      function createSVGElement(tag) {
        return document.createElementNS("http://www.w3.org/2000/svg", tag);
      }

      // Función para generar las filas de stands
      function generateStandRows() {
        const rowA = document.getElementById("row-a");
        const rowB = document.getElementById("row-b");
        const rowC = document.getElementById("row-c");

        // Generar filas A, B, C
        for (let i = 0; i < 17; i++) {
          // Fila A
          const standIdA = moduleMap[`A${i + 1}`]?.name || `A${i + 1}`;
          const colorClassA = moduleMap[`A${i + 1}`]?.color || "";
          const xA = i * (46.25 + 30);

          const gA = createSVGElement("g");

          const rectA = createSVGElement("rect");
          rectA.setAttribute("x", xA);
          rectA.setAttribute("y", 30);
          rectA.setAttribute("width", 46.25);
          rectA.setAttribute("height", 46.75);
          rectA.setAttribute("class", `module ${colorClassA}`);
          rectA.setAttribute("data-stand-id", standIdA);

          const textA = createSVGElement("text");
          textA.setAttribute("x", xA + 23.125);
          textA.setAttribute("y", 57);
          textA.setAttribute("text-anchor", "middle");
          textA.setAttribute("class", "stand-label");
          textA.textContent = standIdA;

          gA.appendChild(rectA);
          gA.appendChild(textA);
          rowA.appendChild(gA);

          // Fila B
          const standIdB = moduleMap[`B${i + 1}`]?.name || `B${i + 1}`;
          const colorClassB = moduleMap[`B${i + 1}`]?.color || "";
          const xB = i * (46.25 + 30);

          const gB = createSVGElement("g");

          const rectB = createSVGElement("rect");
          rectB.setAttribute("x", xB);
          rectB.setAttribute("y", 106.75);
          rectB.setAttribute("width", 46.25);
          rectB.setAttribute("height", 46.75);
          rectB.setAttribute("class", `module ${colorClassB}`);
          rectB.setAttribute("data-stand-id", standIdB);

          const textB = createSVGElement("text");
          textB.setAttribute("x", xB + 23.125);
          textB.setAttribute("y", 133.75);
          textB.setAttribute("text-anchor", "middle");
          textB.setAttribute("class", "stand-label");
          textB.textContent = standIdB;

          gB.appendChild(rectB);
          gB.appendChild(textB);
          rowB.appendChild(gB);

          // Fila C
          const standIdC = moduleMap[`C${i + 1}`]?.name || `C${i + 1}`;
          const colorClassC = moduleMap[`C${i + 1}`]?.color || "";
          const xC = i * (46.25 + 30);

          const gC = createSVGElement("g");

          const rectC = createSVGElement("rect");
          rectC.setAttribute("x", xC);
          rectC.setAttribute("y", 183.5);
          rectC.setAttribute("width", 46.25);
          rectC.setAttribute("height", 46.75);
          rectC.setAttribute("class", `module ${colorClassC}`);
          rectC.setAttribute("data-stand-id", standIdC);

          const textC = createSVGElement("text");
          textC.setAttribute("x", xC + 23.125);
          textC.setAttribute("y", 210.5);
          textC.setAttribute("text-anchor", "middle");
          textC.setAttribute("class", "stand-label");
          textC.textContent = standIdC;

          gC.appendChild(rectC);
          gC.appendChild(textC);
          rowC.appendChild(gC);
        }
      }

      // Función para generar los módulos izquierdos
      function generateLeftModules() {
        const leftModulesEl = document.getElementById("left-modules");

        let currentY = baseY;
        leftModules.forEach((module, i) => {
          const g = createSVGElement("g");

          const rect = createSVGElement("rect");
          rect.setAttribute("x", -60.125);
          rect.setAttribute("y", currentY);
          rect.setAttribute("width", module.width);
          rect.setAttribute("height", module.height);
          rect.setAttribute("class", `module ${module.color}`);
          rect.setAttribute("data-stand-id", module.name);

          const text = createSVGElement("text");
          text.setAttribute("x", -45.0625);
          text.setAttribute("y", currentY + module.height / 2);
          text.setAttribute("text-anchor", "middle");
          text.setAttribute("class", "stand-label");
          text.textContent = module.name;

          g.appendChild(rect);
          g.appendChild(text);
          leftModulesEl.appendChild(g);

          currentY += module.height;
        });
      }

      // Función para generar los módulos derechos
      function generateRightModules() {
        const rightModulesEl = document.getElementById("right-modules");

        let currentY = baseY;
        rightModules.forEach((module, i) => {
          const g = createSVGElement("g");

          const rect = createSVGElement("rect");
          rect.setAttribute("x", 1355.911);
          rect.setAttribute("y", currentY);
          rect.setAttribute("width", module.width);
          rect.setAttribute("height", module.height);
          rect.setAttribute("class", `module ${module.color}`);
          rect.setAttribute("data-stand-id", module.name);

          const text = createSVGElement("text");
          text.setAttribute("x", 1369.911);
          text.setAttribute("y", currentY + module.height / 2);
          text.setAttribute("text-anchor", "middle");
          text.setAttribute("class", "stand-label");
          text.textContent = module.name;

          g.appendChild(rect);
          g.appendChild(text);
          rightModulesEl.appendChild(g);

          currentY += module.height;
        });
      }

      // Función para generar los módulos superiores
      function generateTopModules() {
        const topModulesEl = document.getElementById("top-modules");

        topModules.forEach((module) => {
          const rect = createSVGElement("rect");
          rect.setAttribute("x", module.x);
          rect.setAttribute("y", module.y);
          rect.setAttribute("width", module.width);
          rect.setAttribute("height", module.height);
          rect.setAttribute("class", `module ${module.color}`);
          rect.setAttribute("data-stand-id", module.id);

          const text = createSVGElement("text");
          text.setAttribute("x", module.x + module.width / 2);
          text.setAttribute("y", module.y + module.height / 2);
          text.setAttribute("text-anchor", "middle");
          text.setAttribute("class", "stand-label");
          text.textContent = module.id;

          topModulesEl.appendChild(rect);
          topModulesEl.appendChild(text);
        });
      }

      // Función para generar los módulos inferiores
      function generateBottomModules() {
        const bottomModulesEl = document.getElementById("bottom-modules");

        // Módulo en forma de L (104)
        const moduleL = createSVGElement("g");

        const rectLVertical = createSVGElement("rect");
        rectLVertical.setAttribute("x", -60.125);
        rectLVertical.setAttribute("y", 263);
        rectLVertical.setAttribute("width", 30.125);
        rectLVertical.setAttribute("height", 77);
        rectLVertical.setAttribute("class", "module red");
        rectLVertical.setAttribute("data-stand-id", "104");

        const rectLHorizontal = createSVGElement("rect");
        rectLHorizontal.setAttribute("x", -30);
        rectLHorizontal.setAttribute("y", 310);
        rectLHorizontal.setAttribute("width", 70);
        rectLHorizontal.setAttribute("height", 30.125);
        rectLHorizontal.setAttribute("class", "module red");
        rectLHorizontal.setAttribute("data-stand-id", "104");

        const textLVertical = createSVGElement("text");
        textLVertical.setAttribute("x", -45.0625);
        textLVertical.setAttribute("y", 293);
        textLVertical.setAttribute("text-anchor", "middle");
        textLVertical.setAttribute("class", "stand-label");
        textLVertical.textContent = "104";

        moduleL.appendChild(rectLVertical);
        moduleL.appendChild(rectLHorizontal);
        moduleL.appendChild(textLVertical);
        bottomModulesEl.appendChild(moduleL);

        // Otros módulos inferiores
        bottomModules.forEach((module) => {
          const g = createSVGElement("g");

          const rect = createSVGElement("rect");
          rect.setAttribute("x", module.x);
          rect.setAttribute("y", module.y);
          rect.setAttribute("width", module.width);
          rect.setAttribute("height", module.height);
          rect.setAttribute("class", `module ${module.color}`);
          rect.setAttribute("data-stand-id", module.id);

          const text = createSVGElement("text");
          text.setAttribute("x", module.x + module.width / 2);
          text.setAttribute("y", module.y + module.height / 2);
          text.setAttribute("text-anchor", "middle");
          text.setAttribute("class", "stand-label");
          text.textContent = module.id;

          g.appendChild(rect);
          g.appendChild(text);
          bottomModulesEl.appendChild(g);
        });
      }

      // Función para generar los módulos del pasillo D
      function generatePasilloD() {
        const pasilloDModulesEl = document.getElementById("pasillo-d-modules");

        // Generar grupos del pasillo D
        pasilloDGroups.forEach((group) => {
          if (group.standalone) {
            // Módulo individual
            const rect = createSVGElement("rect");
            rect.setAttribute("x", group.x);
            rect.setAttribute("y", group.y);
            rect.setAttribute("width", group.width);
            rect.setAttribute("height", group.height);
            rect.setAttribute("class", `module ${group.color}`);
            rect.setAttribute("data-stand-id", group.id);

            const text = createSVGElement("text");
            text.setAttribute("x", group.x + group.width / 2);
            text.setAttribute("y", group.y + group.height / 2);
            text.setAttribute("text-anchor", "middle");
            text.setAttribute("class", "stand-label");
            text.textContent = group.id;

            pasilloDModulesEl.appendChild(rect);
            pasilloDModulesEl.appendChild(text);
          } else {
            // Grupo de módulos
            const g = createSVGElement("g");
            g.setAttribute("transform", group.transform);

            group.modules.forEach((module) => {
              const rect = createSVGElement("rect");
              rect.setAttribute("x", module.x);
              rect.setAttribute("y", module.y);
              rect.setAttribute("width", module.width);
              rect.setAttribute("height", module.height);
              rect.setAttribute("class", `module ${module.color}`);
              rect.setAttribute("data-stand-id", module.id);

              const text = createSVGElement("text");
              text.setAttribute("x", module.x + module.width / 2);
              text.setAttribute("y", module.y + module.height / 2);
              text.setAttribute("text-anchor", "middle");
              text.setAttribute("class", "stand-label");
              text.textContent = module.id;

              g.appendChild(rect);
              g.appendChild(text);
            });

            pasilloDModulesEl.appendChild(g);
          }
        });
      }

      // Función para generar los módulos del pasillo E
      function generatePasilloE() {
        const pasilloEModulesEl = document.getElementById("pasillo-e-modules");

        // Generar grupos del pasillo E
        pasilloEGroups.forEach((group) => {
          if (group.standalone) {
            // Módulo individual
            const rect = createSVGElement("rect");
            rect.setAttribute("x", group.x);
            rect.setAttribute("y", group.y);
            rect.setAttribute("width", group.width);
            rect.setAttribute("height", group.height);
            rect.setAttribute("class", `module ${group.color}`);
            rect.setAttribute("data-stand-id", group.id);

            const text = createSVGElement("text");
            text.setAttribute("x", group.x + group.width / 2);
            text.setAttribute("y", group.y + group.height / 2);
            text.setAttribute("text-anchor", "middle");
            text.setAttribute("class", "stand-label");
            text.textContent = group.id;

            pasilloEModulesEl.appendChild(rect);
            pasilloEModulesEl.appendChild(text);
          } else {
            // Grupo de módulos
            const g = createSVGElement("g");
            g.setAttribute("transform", group.transform);

            group.modules.forEach((module) => {
              const rect = createSVGElement("rect");
              rect.setAttribute("x", module.x);
              rect.setAttribute("y", module.y);
              rect.setAttribute("width", module.width);
              rect.setAttribute("height", module.height);
              rect.setAttribute("class", `module ${module.color}`);
              rect.setAttribute("data-stand-id", module.id);

              const text = createSVGElement("text");
              text.setAttribute("x", module.x + module.width / 2);
              text.setAttribute("y", module.y + module.height / 2);
              text.setAttribute("text-anchor", "middle");
              text.setAttribute("class", "stand-label");
              text.textContent = module.id;

              g.appendChild(rect);
              g.appendChild(text);
            });

            pasilloEModulesEl.appendChild(g);
          }
        });
      }

      // Función para mostrar el tooltip
      function showTooltip(e, standId, container = document) {
        const rect = e.target.getBoundingClientRect();
        const tooltipEl = container.querySelector(".tooltip");

        if (!tooltipEl) return;

        tooltipEl.textContent = `Stand ${standId}`;
        tooltipEl.style.left = `${rect.left + rect.width / 2}px`;
        tooltipEl.style.top = `${rect.top - 40}px`;
        tooltipEl.style.opacity = "1";
        tooltipEl.style.visibility = "visible";
        tooltipEl.style.transform = "translateX(-50%) translateY(0)";
      }

      // Función para ocultar el tooltip
      function hideTooltip(container = document) {
        const tooltipEl = container.querySelector(".tooltip");
        if (!tooltipEl) return;

        tooltipEl.style.opacity = "0";
        tooltipEl.style.visibility = "hidden";
        tooltipEl.style.transform = "translateX(-50%) translateY(10px)";
      }

      // Función para seleccionar un stand
      function selectStand(standId, container = document) {
        // Deseleccionar el stand anterior
        if (selectedStand) {
          const prevStandElements = container.querySelectorAll(
            `[data-stand-id="${selectedStand}"]`
          );
          prevStandElements.forEach((el) => {
            el.classList.remove("selected");
            el.classList.remove("blinking");
          });
        }

        // Seleccionar el nuevo stand
        selectedStand = standId;
        const standElements = container.querySelectorAll(
          `[data-stand-id="${standId}"]`
        );
        standElements.forEach((el) => {
          el.classList.add("selected");
          el.classList.add("blinking");
        });

        // Actualizar la información del stand
        const standInfoEl = container.querySelector("#stand-info");
        if (standInfoEl) {
          standInfoEl.innerHTML = `
            <p class="selected-stand">Stand: ${standId}</p>
            <p class="info-text">Haz clic en un stand para ver más detalles</p>
          `;
        }

        // Desplazarse al stand seleccionado
        const standElement = container.querySelector(
          `[data-stand-id="${standId}"]`
        );
        if (standElement) {
          const mapScrollEl = container.querySelector(".map-scroll");
          const mapContentEl = container.querySelector(".map-content");

          if (mapScrollEl && mapContentEl) {
            const standRect = standElement.getBoundingClientRect();
            const mapRect = mapScrollEl.getBoundingClientRect();

            const centerX = standRect.left + standRect.width / 2 - mapRect.left;
            const centerY = standRect.top + standRect.height / 2 - mapRect.top;

            const currentPosition = {
              x: (mapScrollEl.clientWidth / 2 - centerX) / zoomLevel,
              y: (mapScrollEl.clientHeight / 2 - centerY) / zoomLevel,
            };

            mapContentEl.style.transform = `scale(${zoomLevel}) translate(${currentPosition.x}px, ${currentPosition.y}px)`;

            // Actualizar la posición global si estamos en el contenedor principal
            if (container === document) {
              position = currentPosition;
            }
          }
        }
      }

      // Función para actualizar la transformación del mapa
      function updateMapTransform(container = document) {
        const mapContentEl = container.querySelector(".map-content");
        const zoomLevelEl = container.querySelector(".zoom-level");

        if (mapContentEl) {
          mapContentEl.style.transform = `scale(${zoomLevel}) translate(${position.x}px, ${position.y}px)`;
        }

        if (zoomLevelEl) {
          zoomLevelEl.textContent = `${Math.round(zoomLevel * 100)}%`;
        }
      }

      // Función para inicializar los eventos del mapa
      function initMapEvents(container = document) {
        const mapScrollEl = container.querySelector(".map-scroll");
        const mapContentEl = container.querySelector(".map-content");
        const zoomInBtn = container.querySelector("#zoom-in");
        const zoomOutBtn = container.querySelector("#zoom-out");
        const zoomResetBtn = container.querySelector("#zoom-reset");
        const searchFormEl = container.querySelector("#map-search-form");
        const searchInputEl = container.querySelector("#map-search-input");
        const modules = container.querySelectorAll(".module");

        if (!mapScrollEl || !mapContentEl) return;

        // Agregar eventos a los módulos
        modules.forEach((module) => {
          const standId = module.getAttribute("data-stand-id");

          module.addEventListener("click", () => {
            selectStand(standId, container);
          });

          module.addEventListener("mouseenter", (e) => {
            showTooltip(e, standId, container);
          });

          module.addEventListener("mouseleave", () => {
            hideTooltip(container);
          });

          // Agregar soporte para dispositivos táctiles
          module.addEventListener("touchstart", (e) => {
            e.preventDefault();
            selectStand(standId, container);
          });
        });

        // Configurar el zoom
        if (zoomInBtn) {
          zoomInBtn.addEventListener("click", () => {
            zoomLevel = Math.min(zoomLevel + 0.2, 2);
            updateMapTransform(container);
          });
        }

        if (zoomOutBtn) {
          zoomOutBtn.addEventListener("click", () => {
            zoomLevel = Math.max(zoomLevel - 0.2, 0.5);
            updateMapTransform(container);
          });
        }

        if (zoomResetBtn) {
          zoomResetBtn.addEventListener("click", () => {
            zoomLevel = 1;
            position = { x: 0, y: 0 };
            updateMapTransform(container);
          });
        }

        // Configurar el arrastre del mapa
        mapScrollEl.addEventListener("mousedown", (e) => {
          if (e.button !== 0) return; // Solo botón izquierdo

          isDragging = true;
          startX = e.clientX;
          startY = e.clientY;
          startPosX = position.x;
          startPosY = position.y;
          mapScrollEl.style.cursor = "grabbing";

          e.preventDefault();
        });

        mapScrollEl.addEventListener(
          "touchstart",
          (e) => {
            if (e.touches.length !== 1) return;

            isDragging = true;
            startX = e.touches[0].clientX;
            startY = e.touches[0].clientY;
            startPosX = position.x;
            startPosY = position.y;

            e.preventDefault();
          },
          { passive: false }
        );

        // Configurar el movimiento del mapa
        const handleMouseMove = (e) => {
          if (!isDragging) return;

          const dx = (e.clientX - startX) * 0.5;
          const dy = (e.clientY - startY) * 0.5;

          position.x = startPosX + dx / zoomLevel;
          position.y = startPosY + dy / zoomLevel;

          updateMapTransform(container);
        };

        const handleTouchMove = (e) => {
          if (!isDragging || e.touches.length !== 1) return;

          const dx = (e.touches[0].clientX - startX) * 0.5;
          const dy = (e.touches[0].clientY - startY) * 0.5;

          position.x = startPosX + dx / zoomLevel;
          position.y = startPosY + dy / zoomLevel;

          updateMapTransform(container);

          e.preventDefault();
        };

        const handleMouseUp = () => {
          isDragging = false;
          if (mapScrollEl) {
            mapScrollEl.style.cursor = "grab";
          }
        };

        // Agregar eventos al documento o al contenedor
        if (container === document) {
          document.addEventListener("mousemove", handleMouseMove);
          document.addEventListener("touchmove", handleTouchMove, {
            passive: false,
          });
          document.addEventListener("mouseup", handleMouseUp);
          document.addEventListener("touchend", handleMouseUp);
        } else {
          container.addEventListener("mousemove", handleMouseMove);
          container.addEventListener("touchmove", handleTouchMove, {
            passive: false,
          });
          container.addEventListener("mouseup", handleMouseUp);
          container.addEventListener("touchend", handleMouseUp);
        }

        // Configurar la búsqueda
        if (searchFormEl && searchInputEl) {
          searchFormEl.addEventListener("submit", (e) => {
            e.preventDefault();
            const searchValue = searchInputEl.value.trim();

            if (searchValue) {
              // Buscar el stand por ID
              const standElements = container.querySelectorAll(
                `[data-stand-id="${searchValue}"]`
              );
              if (standElements.length > 0) {
                selectStand(searchValue, container);
              } else {
                alert(`Stand ${searchValue} no encontrado.`);
              }
            }
          });
        }

        // Modificar el evento de clic para detener el parpadeo pero mantener la selección
        modules.forEach((module) => {
          module.addEventListener("click", (e) => {
            const standId = module.getAttribute("data-stand-id");
            selectStand(standId, container);

            // Detener el parpadeo pero mantener la selección
            const standElements = container.querySelectorAll(
              `[data-stand-id="${standId}"]`
            );
            standElements.forEach((el) => {
              el.classList.remove("blinking");
            });
          });
        });
      }

      // Función para activar el modo horizontal
      function toggleLandscapeMode() {
        if (!isLandscapeMode) {
          // Activar modo horizontal
          landscapeContainer = document.createElement("div");
          landscapeContainer.id = "landscape-container";
          landscapeContainer.className = "landscape-mode";

          // Clonar el contenido del mapa
          const mapContainerClone = interactiveMapContainer.cloneNode(true);
          mapContainerClone.style.display = "block";

          // Agregar botón de cierre
          const closeButton = document.createElement("button");
          closeButton.className = "close-landscape";
          closeButton.innerHTML = "×";
          closeButton.onclick = function () {
            // Eliminar el contenedor de modo horizontal
            document.body.removeChild(landscapeContainer);
            isLandscapeMode = false;
            document.body.style.overflow = "";
          };

          landscapeContainer.appendChild(closeButton);
          landscapeContainer.appendChild(mapContainerClone);
          document.body.appendChild(landscapeContainer);

          isLandscapeMode = true;
          document.body.style.overflow = "hidden";

          // Inicializar eventos en el modo horizontal
          initMapEvents(landscapeContainer);

          // Sincronizar el estado actual
          updateMapTransform(landscapeContainer);

          // Si hay un stand seleccionado, mostrarlo también en el modo horizontal
          if (selectedStand) {
            selectStand(selectedStand, landscapeContainer);
          }
        } else {
          // Desactivar modo horizontal
          if (landscapeContainer) {
            document.body.removeChild(landscapeContainer);
            landscapeContainer = null;
          }

          isLandscapeMode = false;
          document.body.style.overflow = "";
        }
      }

      // Función para inicializar el mapa
      function initMap() {
        // Generar los elementos del mapa
        generateStandRows();
        generateLeftModules();
        generateRightModules();
        generateTopModules();
        generateBottomModules();
        generatePasilloD();
        generatePasilloE();

        // Inicializar eventos del mapa
        initMapEvents();

        // Configurar el botón de rotación
        rotateButton.addEventListener("click", toggleLandscapeMode);
      }

      // Todos los módulos del mapa original
      const allModules = [
        // Módulos de la cuadrícula principal (A, B, C)
        {
          id: "100",
          color: "red",
          group: "grid",
          row: "A",
          col: 0,
          info: "DEPOSITPHOTOS INC Imágenes, fotos, vídeos y música libres de derechos.",
        },
        {
          id: "415",
          color: "red",
          group: "grid",
          row: "A",
          col: 1,
          info: "Space Drone Show-",
        },
        {
          id: "515",
          color: "green",
          group: "grid",
          row: "A",
          col: 2,
          info: "TROLISA-Fabricacion de Material POP",
        },
        {
          id: "615",
          color: "green",
          group: "grid",
          row: "A",
          col: 3,
          info: "En El Blanco-RETAIL MARKETING",
        },
        {
          id: "715",
          color: "green",
          group: "grid",
          row: "A",
          col: 4,
          info: "KUSCO SUSTENTABLE-MARKETING MEDIOS , EVENT MARKETING, RETAIL Y MERCHANDISING",
        },
        {
          id: "815",
          color: "green",
          group: "grid",
          row: "A",
          col: 5,
          info: "Información del expositor",
        },
        {
          id: "915",
          color: "orange",
          group: "grid",
          row: "A",
          col: 6,
          info: "Casa Diaz Maquinaz de Coser-Somos los pioneros en brindar soluciones integrales para tus necesidades de costura",
        },
        {
          id: "1015",
          color: "orange",
          group: "grid",
          row: "A",
          col: 7,
          info: "Mercaflash-En mercaflash nos enfocamos en impresión y publicidad",
        },
        {
          id: "1105",
          color: "orange",
          group: "grid",
          row: "A",
          col: 8,
          info: "Información del expositor",
        },
        {
          id: "1205",
          color: "orange",
          group: "grid",
          row: "A",
          col: 9,
          info: "Información del expositor",
        },
        {
          id: "1216",
          color: "yellow",
          group: "grid",
          row: "A",
          col: 10,
          info: "Embolsa-SOMOS UNA EMPRESA MEXICANA ELABORANDO PRODUCTOS DE CALIDAD Y CON LOS MEJORES MATERIALES.",
        },
        {
          id: "1315",
          color: "yellow",
          group: "grid",
          row: "A",
          col: 11,
          info: "Mid Ocean-Mayorista importador de gadget y textil promocional.",
        },
        {
          id: "1415",
          color: "yellow",
          group: "grid",
          row: "A",
          col: 12,
          info: "Daltech Promo Y Mas-Importadora de productos para eventos y tecnologia.",
        },
        {
          id: "1515",
          color: "yellow",
          group: "grid",
          row: "A",
          col: 13,
          info: "BH Trade Market-Somos expertos en soluciones de artículos promocionales",
        },
        {
          id: "1615",
          color: "yellow",
          group: "grid",
          row: "A",
          col: 14,
          info: "Publimundo-Elaboración de artículos textiles, uniformes industriales y corporativos sobre diseño. ",
        },
        {
          id: "1715",
          color: "yellow",
          group: "grid",
          row: "A",
          col: 15,
          info: "ForPromotional-En for promotional, somos líderes en la comercialización de artículos promocionales exclusivamente para distribuidores en méxico.",
        },
        {
          id: "1815",
          color: "yellow",
          group: "grid",
          row: "A",
          col: 16,
          info: "M&O Knits-fabricación desde hilatura, tejido, acabado y confección de playeras y sudaderas ",
        },
        {
          id: "1905",
          color: "yellow",
          group: "grid",
          row: "A",
          col: 17,
          info: "Generado Ideas-Servicio integral de artículos promocionales, desarrollando proyectos únicos, diferentes e innovadores.",
        },
        {
          id: "2015",
          color: "yellow",
          group: "grid",
          row: "A",
          col: 18,
          info: "Información del expositor",
        },

        {
          id: "409",
          color: "red",
          group: "grid",
          row: "B",
          col: 1,
          info: "C MEDIA FILMS",
        },
        {
          id: "509",
          color: "green",
          group: "grid",
          row: "B",
          col: 2,
          info: "Información del expositor",
        },
        {
          id: "609",
          color: "green",
          group: "grid",
          row: "B",
          col: 3,
          info: "Grupo+Epacio",
        },
        {
          id: "709",
          color: "green",
          group: "grid",
          row: "B",
          col: 4,
          info: "Ledup-Ofrecemos una solución perfecta para crear exhibiciones cautivadoras en expos, puntos de venta, congresos y más.",
        },
        {
          id: "809",
          color: "green",
          group: "grid",
          row: "B",
          col: 5,
          info: "Información del expositor",
        },
        {
          id: "909",
          color: "orange",
          group: "grid",
          row: "B",
          col: 6,
          info: "ExpoTouch",
        },
        {
          id: "1005",
          color: "orange",
          group: "grid",
          row: "B",
          col: 7,
          info: "Información del expositor",
        },
        {
          id: "1105",
          color: "orange",
          group: "grid",
          row: "B",
          col: 8,
          info: "PlottersMX-Empresa especializada en venta, distribuicion y exportacion de equipos profesionales de impresion destinados a la industria publicitaria",
        },
        {
          id: "1205",
          color: "orange",
          group: "grid",
          row: "B",
          col: 9,
          info: "Información del expositor",
        },
        {
          id: "1210",
          color: "yellow",
          group: "grid",
          row: "B",
          col: 10,
          info: "Boye Laser",
        },
        {
          id: "1309",
          color: "yellow",
          group: "grid",
          row: "B",
          col: 11,
          info: "Información del expositor",
        },
        {
          id: "1409",
          color: "yellow",
          group: "grid",
          row: "B",
          col: 12,
          info: "BigBang",
        },
        {
          id: "1509",
          color: "yellow",
          group: "grid",
          row: "B",
          col: 13,
          info: "Promoopcion",
        },
        {
          id: "1609",
          color: "yellow",
          group: "grid",
          row: "B",
          col: 14,
          info: "Innovation Line",
        },
        {
          id: "1709",
          color: "yellow",
          group: "grid",
          row: "B",
          col: 15,
          info: "Promo Life",
        },
        {
          id: "1809",
          color: "yellow",
          group: "grid",
          row: "B",
          col: 16,
          info: "Promo Life",
        },
        {
          id: "1905",
          color: "yellow",
          group: "grid",
          row: "B",
          col: 17,
          info: "Generando Ideas",
        },
        {
          id: "2009",
          color: "yellow",
          group: "grid",
          row: "B",
          col: 18,
          info: "Información del expositor",
        },

        {
          id: "405",
          color: "red",
          group: "grid",
          row: "C",
          col: 1,
          info: "FRABEREXPO",
        },
        {
          id: "505",
          color: "green",
          group: "grid",
          row: "C",
          col: 2,
          info: "Información del expositor",
        },
        {
          id: "605",
          color: "green",
          group: "grid",
          row: "C",
          col: 3,
          info: "Red Pepper Studio-Agencia de publicidad 360° especiallizada en experienciass al consumidor",
        },
        {
          id: "705",
          color: "green",
          group: "grid",
          row: "C",
          col: 4,
          info: "Color Publicitario Solucion Creativa-Somos una agencia publicitaria especializada en la fabricación de artículos para activaciones de marca ",
        },
        {
          id: "805",
          color: "green",
          group: "grid",
          row: "C",
          col: 5,
          info: "Printer House",
        },
        {
          id: "905",
          color: "orange",
          group: "grid",
          row: "C",
          col: 6,
          info: "ABC Displays",
        },
        {
          id: "1005",
          color: "orange",
          group: "grid",
          row: "C",
          col: 7,
          info: "Información del expositor",
        },
        {
          id: "1105",
          color: "orange",
          group: "grid",
          row: "C",
          col: 8,
          info: "Información del expositor",
        },
        {
          id: "1205",
          color: "orange",
          group: "grid",
          row: "C",
          col: 9,
          info: "Información del expositor",
        },
        {
          id: "1206",
          color: "yellow",
          group: "grid",
          row: "C",
          col: 10,
          info: "NORDAY",
        },
        {
          id: "1305",
          color: "yellow",
          group: "grid",
          row: "C",
          col: 11,
          info: "Información del expositor",
        },
        {
          id: "1405",
          color: "yellow",
          group: "grid",
          row: "C",
          col: 12,
          info: "Gorras DKPS",
        },
        {
          id: "1505",
          color: "yellow",
          group: "grid",
          row: "C",
          col: 13,
          info: "CDO Promocionales",
        },
        {
          id: "1605",
          color: "yellow",
          group: "grid",
          row: "C",
          col: 14,
          info: "Stormtech",
        },
        {
          id: "1705",
          color: "yellow",
          group: "grid",
          row: "C",
          col: 15,
          info: "Hugo Boss",
        },
        {
          id: "1805",
          color: "yellow",
          group: "grid",
          row: "C",
          col: 16,
          info: "Grupo Bibo",
        },
        {
          id: "1905",
          color: "yellow",
          group: "grid",
          row: "C",
          col: 17,
          info: "Generando Ideas",
        },
        {
          id: "2005",
          color: "yellow",
          group: "grid",
          row: "C",
          col: 18,
          info: "Nottorius",
        },

        // Módulos del grupo X
        {
          id: "321",
          color: "red",
          group: "xgroup",
          info: "Grupo Rubrica-Diseño y fabricacion de modulos portatiles para el punto de venta.",
        },
        {
          id: "325",
          color: "red",
          group: "xgroup",
          info: "MYAPP - Empresa de desarrollo de aplicaciones móviles",
          highlight: true,
        },
        {
          id: "425",
          color: "green",
          group: "ygroup",
          info: "NOMOPRO-AGENCIA DE CONTENIDOS AUDIOVISUALES Y TECNOLOGIAS HOLOGRAFICAS",
        },
        {
          id: "426",
          color: "red",
          group: "xgroup",
          info: "Buo Tech-Agencia de marketing digital",
        },
        {
          id: "329",
          color: "red",
          group: "xgroup",
          info: "Frank Wadskier-Relaciones públicas, marketing digital y cyberseguridad",
        },
        {
          id: "430",
          color: "red",
          group: "xgroup",
          info: "Craft Marketing Group-",
        },

        // Módulos del grupo Y (primer grupo)
        {
          id: "429",
          color: "green",
          group: "ygroup",
          info: "Power Led-",
        },
        {
          id: "530",
          color: "green",
          group: "ygroup",
          info: "ROJOPOP-Diseño y fabricación publicidad para el punto de venta",
        },
        {
          id: "526",
          color: "green",
          group: "ygroup",
          info: "Market Beat-Tecnología para espacios inteligentes en retail y digital singage",
        },
        {
          id: "421",
          color: "green",
          group: "ygroup",
          info: "Ratpack-RATPACK ES UNA AGENCIA ESPECIALIZADA EN LA CREACIÓN DE TOTAL BRAND EXPERIENCES",
        },
        {
          id: "522",
          color: "green",
          group: "ygroup",
          info: "ODOO-ODOO OFRECE UN SOFTWARE DE GESTIÓN EMPRESARIAL TODO-EN-UNO",
        },

        // Módulos del grupo A (segundo grupo)
        {
          id: "529",
          color: "green",
          group: "agroup",
          info: "Hit Mercadotecnia y Eventos-PRODUCTORA DE EVENTOS, CONGRESOS Y ESCENARIOS DE CONFERENCIAS PARA EXPOS",
        },
        {
          id: "525",
          color: "green",
          group: "agroup",
          info: "One Media- soluciones y asesorías tecnológicas de transmisión, media, audio, video, saas, producción y servicios en la nybe para enfrentar los desafíos de cada cliente",
        },
        {
          id: "626",
          color: "green",
          group: "agroup",
          info: "Backtrack-BACKTRACK IS YOUR AI-POWERED BOOTH ASSISTANT FOR TRADE SHOWS AND MEETINGS",
        },
        {
          id: "521",
          color: "green",
          group: "agroup",
          info: "Kobbox Technologies-",
        },
        {
          id: "622",
          color: "green",
          group: "agroup",
          info: "Grupo Expomex-Ofrecemos soluciones visuales innovadoras en digital signage, señalización, exhibidores, displays portátiles, mobiliario industrial y mucho más",
        },

        // Módulos del grupo A (tercer grupo)
        {
          id: "621",
          color: "green",
          group: "agroup",
          info: "YC Light Mexico-Venta de ilumianción, video y audio profesional",
        },
        {
          id: "625",
          color: "green",
          group: "agroup",
          info: "Cadgrafics-Comercialización de software y hardware",
        },
        {
          id: "700",
          color: "green",
          group: "ygroup",
          info: "LDM-Disribuidora de materiales plásticos y equipos de soldadura plástica, para el sellado de lonas",
        },
        {
          id: "726",
          color: "green",
          group: "agroup",
          info: "Movid Dot-DISEÑO DE EXPERIENCIAS INTEGRALES PARA MARCAS QUE BUSCAN CONECTAR, TRANSFORMAR Y CRECER, INTEGRANDO ESTRATEGIA, CREATIVIDAD Y TECNOLOGIA",
        },
        {
          id: "629",
          color: "green",
          group: "agroup",
          info: "Macstore Empresarial-MACSTORE EMPRESARIAL ES UNA DIVISIÓN DE MACSTORE DEDICADA A OFRECER SOLUCIONES TECNOLÓGICAS BASADAS EN PRODUCTOS APPLE PARA EMPRESAS DE TODOS LOS TAMAÑOS EN MÉXICO",
        },
        {
          id: "730",
          color: "green",
          group: "agroup",
          info: "Renta Tu Stand-Renta de stands de aluminio y madera para expos. renta y ejecución de stands institucionales para expos",
        },

        // Módulos del grupo Y (tercer grupo)
        {
          id: "729",
          color: "green",
          group: "ygroup",
          info: "Renta Tu Stand",
        },
        {
          id: "830",
          color: "green",
          group: "ygroup",
          info: "Logotap",
        },
        {
          id: "725",
          color: "green",
          group: "ygroup",
          info: "Información del expositor",
        },
        {
          id: "826",
          color: "green",
          group: "ygroup",
          info: "Información del expositor",
        },
        {
          id: "721",
          color: "green",
          group: "ygroup",
          info: "Información del expositor",
        },
        {
          id: "922",
          color: "green",
          group: "ygroup",
          info: "Creativa Lab",
        },

        // Módulo 821
        {
          id: "821",
          color: "orange",
          group: "single",
          info: "Sublima",
        },

        // Módulos del grupo Y (quinto grupo)
        {
          id: "929",
          color: "orange",
          group: "ygroup",
          info: "Información del expositor",
        },
        {
          id: "1030",
          color: "orange",
          group: "ygroup",
          info: "Información del expositor",
        },
        {
          id: "925",
          color: "orange",
          group: "ygroup",
          info: "Dinagraf",
        },
        {
          id: "1026",
          color: "orange",
          group: "ygroup",
          info: "Revista Enlace Grafico",
        },
        {
          id: "921",
          color: "orange",
          group: "ygroup",
          info: "HDP Solutions",
        },
        {
          id: "1022",
          color: "orange",
          group: "ygroup",
          info: "Mexico Makers",
        },

        // Módulos del grupo Y (sexto grupo)
        {
          id: "1029",
          color: "orange",
          group: "ygroup",
          info: "Información del expositor",
        },
        {
          id: "1130",
          color: "orange",
          group: "ygroup",
          info: "Información del expositor",
        },
        {
          id: "1025",
          color: "orange",
          group: "ygroup",
          info: "El Vendedor Grafico",
        },
        {
          id: "1126",
          color: "orange",
          group: "ygroup",
          info: "Clarity Color",
        },
        {
          id: "1021",
          color: "orange",
          group: "ygroup",
          info: "Boxibag Digital",
        },
        {
          id: "1122",
          color: "orange",
          group: "ygroup",
          info: "Tubelite",
        },

        // Módulos del grupo B
        {
          id: "1129",
          color: "orange",
          group: "bgroup",
          info: "Información del expositor",
        },
        {
          id: "1025",
          color: "orange",
          group: "bgroup",
          info: "El Impresor Internacional",
        },
        {
          id: "1126",
          color: "orange",
          group: "bgroup",
          info: "Clarity Color",
        },
        {
          id: "1121",
          color: "orange",
          group: "bgroup",
          info: "Caralbo Industries",
        },

        // Módulo 1221
        {
          id: "1221",
          color: "yellow",
          group: "single",
          info: "Amprro",
        },

        // Módulos del grupo Y (octavo grupo)
        {
          id: "1329",
          color: "yellow",
          group: "ygroup",
          info: "Promo-T",
        },
        {
          id: "1430",
          color: "yellow",
          group: "ygroup",
          info: "X Promo",
        },
        {
          id: "1325",
          color: "yellow",
          group: "ygroup",
          info: "Zaval",
        },
        {
          id: "1426",
          color: "yellow",
          group: "ygroup",
          info: "Hot-Fix",
        },
        {
          id: "1321",
          color: "yellow",
          group: "ygroup",
          info: "Bolsen",
        },
        {
          id: "1422",
          color: "yellow",
          group: "ygroup",
          info: "SOUL&BLUES",
        },

        // Módulo Z
        {
          id: "1421",
          color: "yellow",
          group: "single",
          info: "JHK T-SHIRT",
        },

        // Módulos del grupo Y (noveno grupo)
        {
          id: "1529",
          color: "yellow",
          group: "ygroup",
          info: "Optima Mayoreo",
        },
        {
          id: "1630",
          color: "yellow",
          group: "ygroup",
          info: "Atlantis Headwear",
        },
        {
          id: "1525",
          color: "yellow",
          group: "ygroup",
          info: "Fintex",
        },
        {
          id: "1626",
          color: "yellow",
          group: "ygroup",
          info: "Novabori",
        },
        {
          id: "1521",
          color: "yellow",
          group: "ygroup",
          info: "Embrotex",
        },
        {
          id: "1622",
          color: "yellow",
          group: "ygroup",
          info: "Sport Caps",
        },

        // Módulos del grupo B (segundo grupo)
        {
          id: "1629",
          color: "yellow",
          group: "bgroup",
          info: "Diseños Alegandrez",
        },
        {
          id: "1625",
          color: "yellow",
          group: "bgroup",
          info: "Kyma",
        },
        {
          id: "1726",
          color: "yellow",
          group: "bgroup",
          info: "Kolormats Publicidad",
        },
        {
          id: "1621",
          color: "yellow",
          group: "bgroup",
          info: "XPRESSIONES",
        },

        // Módulos del grupo X (nuevo grupo)
        {
          id: "1721",
          color: "yellow",
          group: "xgroup",
          info: "Información del expositor",
        },
        {
          id: "1725",
          color: "yellow",
          group: "xgroup",
          info: "Hilafin",
        },
        {
          id: "1826",
          color: "yellow",
          group: "xgroup",
          info: "Box Populi",
        },
        {
          id: "1729",
          color: "yellow",
          group: "xgroup",
          info: "Diseños Alegandrez",
        },
        {
          id: "1830",
          color: "yellow",
          group: "xgroup",
          info: "Diseños Alegandrez",
        },

        // Módulos del grupo Ñ
        {
          id: "1829",
          color: "yellow",
          group: "ngroup",
          info: "SIPP Sistema Integrado Para Productos Promocionales",
        },
        {
          id: "1821",
          color: "yellow",
          group: "ngroup",
          info: "Preslow",
        },

        // Módulos del grupo P
        {
          id: "1929",
          color: "yellow",
          group: "pgroup",
          info: "SV Sport",
        },
        {
          id: "1921",
          color: "yellow",
          group: "pgroup",
          info: "Danpex",
        },

        // Módulos del grupo PR
        {
          id: "2030",
          color: "yellow",
          group: "prgroup",
          info: "Dimension Espacio",
        },
        {
          id: "2026",
          color: "yellow",
          group: "prgroup",
          info: "Diseño MDC",
        },
        {
          id: "2022",
          color: "yellow",
          group: "prgroup",
          info: "Fandango, Corbatas Y Mascadas",
        },

        // Módulos del grupo H
        {
          id: "2130",
          color: "yellow",
          group: "hgroup",
          info: "Medallas Y Monedas Romero",
        },
        {
          id: "2128",
          color: "yellow",
          group: "hgroup",
          info: "Remo",
        },
        {
          id: "2122",
          color: "yellow",
          group: "hgroup",
          info: "PS Import & Export",
        },

        // Módulos del grupo T
        {
          id: "2029",
          color: "yellow",
          group: "tgroup",
          info: "Información del expositor",
        },
        {
          id: "2025",
          color: "yellow",
          group: "tgroup",
          info: "Jofinsa & Industria Hersamex",
        },
        {
          id: "2021",
          color: "yellow",
          group: "tgroup",
          info: "Playeras Mark",
        },

        // Módulos de la izquierda (148 al 112)
        {
          id: "148",
          color: "red",
          group: "left",
          info: "Copamex Music TV",
        },
        {
          id: "146",
          color: "red",
          group: "left",
          info: "Merca2.0-Servicios de informacion y medios especializados en marketing, publicidad de comunicacion y analisis de mercado",
        },
        {
          id: "142",
          color: "red",
          group: "left",
          info: "PREVENTA",
        },
        {
          id: "140",
          color: "red",
          group: "left",
          info: "Información del expositor",
        },
        {
          id: "136",
          color: "red",
          group: "left",
          info: "DSLATAM ASOCIACION DIGITAL SIGNAGE LATINOAMERICA-Grupo de profesionales y especialistas en digital signage y dooh ",
        },
        {
          id: "134",
          color: "red",
          group: "left",
          info: "Isimultanea- soluciones innovadoras en interpretación simultánea y eventos silenciosos",
        },
        {
          id: "132",
          color: "red",
          group: "left",
          info: "TCHS Technologies- PROPORCIONAR SERVICIOS DE TECNOLOGÍA DE PRIMER NIVEL A EMPRESAS DE TODOS TAMAÑOS",
        },
        {
          id: "130",
          color: "red",
          group: "left",
          info: "Información del expositor",
        },
        {
          id: "128",
          color: "red",
          group: "left",
          info: "Información del expositor",
        },
        {
          id: "126",
          color: "red",
          group: "left",
          info: "SOC XQUENDA-Te acompañamos a crecer con asesoría cercana y clara. especialistas en financiamiento",
        },
        {
          id: "124",
          color: "red",
          group: "left",
          info: "Medios Kreativos-Especialistas en publicidad btl y marketing digital",
        },
        {
          id: "122",
          color: "red",
          group: "left",
          info: "DKOSTORE-Organización de eventos, productos personalizados, kits de bienvenida fiestas tematicas, souvenirs, trofeos, decoración y experiencias corporativas",
        },
        {
          id: "120",
          color: "red",
          group: "left",
          info: "Red Companies Systems-Tecnología",
        },
        {
          id: "116",
          color: "red",
          group: "left",
          info: "Octopy-En octopy somos una fábrica que crea robots e innovación tecnológica para eventos y marketing de las empresas",
        },
        {
          id: "114",
          color: "red",
          group: "left",
          info: "Intellion Tech-Intellion desarrolla soluciones de inteligencia visual y análisis de datos, combinando hardware avanzado y software",
        },
        {
          id: "112",
          color: "red",
          group: "left",
          info: "Información del expositor",
        },

        // Módulos de la derecha
        {
          id: "2139",
          color: "yellow",
          group: "right",
          info: "SERSOMEX EL ARTE EN UNA BUFANDA",
        },
        {
          id: "2137",
          color: "yellow",
          group: "right",
          info: "Vedia Industrial",
        },
        {
          id: "2135",
          color: "yellow",
          group: "right",
          info: "Azafran Boutique",
        },
        {
          id: "2133",
          color: "yellow",
          group: "right",
          info: "Información del expositor",
        },
        {
          id: "2131",
          color: "yellow",
          group: "right",
          info: "Polipropileno Empaque Y Publicidad",
        },
        {
          id: "2129",
          color: "yellow",
          group: "right",
          info: "Wamis",
        },
        {
          id: "2127",
          color: "yellow",
          group: "right",
          info: "CUP IT! Mexico",
        },
        {
          id: "2125",
          color: "yellow",
          group: "right",
          info: "Textil & promotional Products",
        },
        {
          id: "2123",
          color: "yellow",
          group: "right",
          info: "Información del expositor",
        },
        {
          id: "2121",
          color: "yellow",
          group: "right",
          info: "Matina Notebooks",
        },
        {
          id: "2119",
          color: "yellow",
          group: "right",
          info: "Promocolor Mex",
        },
        {
          id: "2115",
          color: "yellow",
          group: "right",
          info: "Grupo Rupek",
        },
        {
          id: "2113",
          color: "yellow",
          group: "right",
          info: "Promaplastic",
        },
        {
          id: "2111",
          color: "yellow",
          group: "right",
          info: "Cilindros y Fotobotones Publicitarios De Mexico",
        },
        {
          id: "2107",
          color: "yellow",
          group: "right",
          info: "Clise / Tecnologia en Emblemas",
        },

        // Módulos 2100 y 2102
        {
          id: "2100",
          color: "yellow",
          group: "single",
          info: "Panal Creativo",
        },
        {
          id: "2102",
          color: "yellow",
          group: "single",
          info: "Empresa de tecnología innovadora",
        },

        // Módulos del pasillo E
        {
          id: "337",
          color: "red",
          group: "ngroup",
          info: " Katrina MKT-Agencia de marketing btl",
        },
        {
          id: "438",
          color: "red",
          group: "ngroup",
          info: "AMERICAN EXPRESS-American express ofrece servicios superiores que exceden las expectativas de los clientes en productos financieros",
        },
        {
          id: "333",
          color: "red",
          group: "ngroup",
          info: "BOOM Growthpartner-Agencia de mercadotecnia 360, siendo la única agencia growth partner en méxico donde el objetivo es ver el mayor retorno de la inversión",
        },
        {
          id: "434",
          color: "red",
          group: "ngroup",
          info: "The Block-Un colectivo de talentos con experiencia de 25 años en el desarrollo y realización de campañas de publicidad",
        },

        {
          id: "437",
          color: "green",
          group: "ngroup",
          info: "RSM Producciones-Nos especializamos en la producción de lanzamientos, convenciones, pasarelas, ruedas de prensa, showrooms, stand, expos, cierre de fin de año, carros alegóricos, entre mucho más",
        },
        {
          id: "538",
          color: "green",
          group: "ngroup",
          info: "Integritas-Somos una empresa de robots de servicio en méxico",
        },
        {
          id: "600",
          color: "green",
          group: "ygroup",
          info: "Pro Display-Fábrica de displays y exhibidores de alta gama, customizados y multimaterial",
        },
        {
          id: "601",
          color: "green",
          group: "ygroup",
          info: "CHARGEU - CHARGEFUZE-Marketing y tecnología",
        },
        {
          id: "602",
          color: "green",
          group: "ygroup",
          info: "Jaime Bravo",
        },
        {
          id: "433",
          color: "green",
          group: "ngroup",
          info: "E-MARKEED",
        },
        {
          id: "534",
          color: "green",
          group: "ngroup",
          info: "Información del expositor",
        },

        // Módulo publicitatalks
        {
          id: "publicitatalks",
          color: "",
          group: "single",
          info: "Las conferencias con tendencia 2025",
        },

        // Módulos 733 y 737
        {
          id: "733",
          color: "green",
          group: "single",
          info: "Información del expositor",
        },
        {
          id: "737",
          color: "green",
          group: "single",
          info: "Virtual Media-VIRTUAL ES UNA EMPRESA DEDICADA A LA COMERCIALIZACIÓN Y DISTRIBUCIÓN DE EQUIPOS TECNOLÓGICOS",
        },
        {
          id: "800",
          color: "orange",
          group: "ygroup",
          info: "Web ID-Iimportadores directos y distribuidores directos de fabrica de las principales soluciones de identificación de personal e impresión de etiquetas en todas sus aplicaciones",
        },

        // Módulo 833
        {
          id: "833",
          color: "orange",
          group: "single",
          info: "Información del expositor",
        },

        // Más módulos del grupo N
        {
          id: "937",
          color: "orange",
          group: "ngroup",
          info: "Información del expositor",
        },
        {
          id: "1038",
          color: "orange",
          group: "ngroup",
          info: "Información del expositor",
        },
        {
          id: "933",
          color: "orange",
          group: "ngroup",
          info: "Información del expositor",
        },
        {
          id: "1034",
          color: "orange",
          group: "ngroup",
          info: "Información del expositor",
        },

        {
          id: "1037",
          color: "orange",
          group: "ngroup",
          info: "Información del expositor",
        },
        {
          id: "1138",
          color: "orange",
          group: "ngroup",
          info: "DISPLAYS, LONAS Y + ",
        },
        {
          id: "1033",
          color: "orange",
          group: "ngroup",
          info: "Información del expositor",
        },
        {
          id: "1134",
          color: "orange",
          group: "ngroup",
          info: "Información del expositor",
        },

        // Módulo 1133
        {
          id: "1133",
          color: "orange",
          group: "single",
          info: "Sideco",
        },

        // Más módulos del grupo N
        {
          id: "1237",
          color: "yellow",
          group: "ngroup",
          info: "Información del expositor",
        },
        {
          id: "1338",
          color: "yellow",
          group: "ngroup",
          info: "Información del expositor",
        },
        {
          id: "1233",
          color: "yellow",
          group: "ngroup",
          info: "Información del expositor",
        },
        {
          id: "1334",
          color: "yellow",
          group: "ngroup",
          info: "Información del expositor",
        },

        // Módulos del grupo O
        {
          id: "1333",
          color: "yellow",
          group: "ogroup",
          info: "Información del expositor",
        },
        {
          id: "1434",
          color: "yellow",
          group: "ogroup",
          info: "Información del expositor",
        },
        {
          id: "1337",
          color: "yellow",
          group: "ogroup",
          info: "Información del expositor",
        },

        // Módulos del grupo S
        {
          id: "1437",
          color: "yellow",
          group: "sgroup",
          info: "Información del expositor",
        },
        {
          id: "1433",
          color: "yellow",
          group: "sgroup",
          info: "Información del expositor",
        },
        {
          id: "1536",
          color: "yellow",
          group: "sgroup",
          info: "Información del expositor",
        },

        // Más módulos del grupo N
        {
          id: "1537",
          color: "yellow",
          group: "ngroup",
          info: "Información del expositor",
        },
        {
          id: "1638",
          color: "yellow",
          group: "ngroup",
          info: "Información del expositor",
        },
        {
          id: "1533",
          color: "yellow",
          group: "ngroup",
          info: "Información del expositor",
        },
        {
          id: "1634",
          color: "yellow",
          group: "ngroup",
          info: "Información del expositor",
        },

        // Módulos del grupo J
        {
          id: "1633",
          color: "yellow",
          group: "jgroup",
          info: "Información del expositor",
        },
        {
          id: "1734",
          color: "yellow",
          group: "jgroup",
          info: "Información del expositor",
        },
        {
          id: "1738",
          color: "yellow",
          group: "jgroup",
          info: "Información del expositor",
        },

        // Más módulos del grupo N
        {
          id: "1737",
          color: "yellow",
          group: "ngroup",
          info: "Información del expositor",
        },
        {
          id: "1838",
          color: "yellow",
          group: "ngroup",
          info: "Información del expositor",
        },
        {
          id: "1733",
          color: "yellow",
          group: "ngroup",
          info: "Información del expositor",
        },
        {
          id: "1834",
          color: "yellow",
          group: "ngroup",
          info: "Información del expositor",
        },

        {
          id: "1837",
          color: "yellow",
          group: "ngroup",
          info: "Información del expositor",
        },
        {
          id: "1938",
          color: "yellow",
          group: "ngroup",
          info: "Información del expositor",
        },
        {
          id: "1833",
          color: "yellow",
          group: "ngroup",
          info: "Información del expositor",
        },
        {
          id: "1934",
          color: "yellow",
          group: "ngroup",
          info: "Información del expositor",
        },

        // Módulo 1933
        {
          id: "1933",
          color: "yellow",
          group: "single",
          info: "Información del expositor",
        },

        // Último grupo N
        {
          id: "1937",
          color: "yellow",
          group: "ngroup",
          info: "Información del expositor",
        },
        {
          id: "2038",
          color: "yellow",
          group: "ngroup",
          info: "Información del expositor",
        },
        {
          id: "1933",
          color: "yellow",
          group: "ngroup",
          info: "Información del expositor",
        },
        {
          id: "2034",
          color: "yellow",
          group: "ngroup",
          info: "Información del expositor",
        },
      ];

      // Variables para el listado de módulos
      let activeFilter = "all";
      let searchQuery = "";
      let filteredModules = [];

      // Función para filtrar módulos
      function filterModules(query, filterType = "all") {
        let filtered = [];

        if (filterType === "all") {
          // Si hay una búsqueda, filtrar por texto
          if (query) {
            filtered = allModules.filter(
              (module) =>
                module.id.toLowerCase().includes(query.toLowerCase()) ||
                module.info.toLowerCase().includes(query.toLowerCase())
            );
          } else {
            // Si no hay búsqueda, mostrar todos los módulos
            filtered = allModules;
          }
        } else if (["red", "green", "orange", "yellow"].includes(filterType)) {
          // Filtrar por color
          filtered = allModules.filter((module) => module.color === filterType);

          // Si hay una búsqueda, filtrar también por texto
          if (query) {
            filtered = filtered.filter(
              (module) =>
                module.id.toLowerCase().includes(query.toLowerCase()) ||
                module.info.toLowerCase().includes(query.toLowerCase())
            );
          }
        }

        return filtered;
      }

      // Función para renderizar módulos por categoría
      function renderModulesByCategory() {
        // Agrupar módulos por color
        const modulesByColor = {
          red: filteredModules.filter((m) => m.color === "red"),
          green: filteredModules.filter((m) => m.color === "green"),
          orange: filteredModules.filter((m) => m.color === "orange"),
          yellow: filteredModules.filter((m) => m.color === "yellow"),
          other: filteredModules.filter(
            (m) =>
              !m.color ||
              !["red", "green", "orange", "yellow"].includes(m.color)
          ),
        };

        let html = "";

        // Marketing (rojo)
        html += '<div class="corridor-section">Marketing</div>';
        html += '<div class="module-grid">';
        if (modulesByColor.red.length > 0) {
          modulesByColor.red.forEach((module) => {
            html += createModuleCard(module);
          });
        } else {
          html +=
            '<div class="no-results">No hay stands en esta categoría que coincidan con la búsqueda.</div>';
        }
        html += "</div>";

        // Retail marketing/Visual (verde)
        html += '<div class="corridor-section">Retail marketing/Visual</div>';
        html += '<div class="module-grid">';
        if (modulesByColor.green.length > 0) {
          modulesByColor.green.forEach((module) => {
            html += createModuleCard(module);
          });
        } else {
          html +=
            '<div class="no-results">No hay stands en esta categoría que coincidan con la búsqueda.</div>';
        }
        html += "</div>";

        // Equipos de impresion/Inpresion/Empaque (naranja)
        html +=
          '<div class="corridor-section">Equipos de impresion/Inpresion/Empaque</div>';
        html += '<div class="module-grid">';
        if (modulesByColor.orange.length > 0) {
          modulesByColor.orange.forEach((module) => {
            html += createModuleCard(module);
          });
        } else {
          html +=
            '<div class="no-results">No hay stands en esta categoría que coincidan con la búsqueda.</div>';
        }
        html += "</div>";

        // Promocionales/Regalo corporativo (amarillo)
        html +=
          '<div class="corridor-section">Promocionales/Regalo corporativo</div>';
        html += '<div class="module-grid">';
        if (modulesByColor.yellow.length > 0) {
          modulesByColor.yellow.forEach((module) => {
            html += createModuleCard(module);
          });
        } else {
          html +=
            '<div class="no-results">No hay stands en esta categoría que coincidan con la búsqueda.</div>';
        }
        html += "</div>";

        // Otros módulos (sin color específico)
        if (modulesByColor.other.length > 0) {
          html += '<h3 class="section-title">Otros Stands</h3>';
          html += '<div class="module-grid">';
          modulesByColor.other.forEach((module) => {
            html += createModuleCard(module);
          });
          html += "</div>";
        }

        return html;
      }

      // Función para renderizar resultados filtrados
      function renderFilteredResults() {
        let html = "";

        if (filteredModules.length === 0) {
          html =
            '<div class="no-results">No se encontraron stands que coincidan con la búsqueda.</div>';
        } else {
          html = `<h3>Resultados (${filteredModules.length} stands)</h3>`;
          html += '<div class="module-grid">';
          filteredModules.forEach((module) => {
            const highlight =
              filteredModules.length === 1 &&
              searchQuery &&
              searchQuery.trim() !== "";
            html += createModuleCard(module, highlight);
          });
          html += "</div>";
        }

        return html;
      }

      // Función para crear una tarjeta de módulo
      function createModuleCard(module, highlight = false) {
        const highlightClass = highlight || module.highlight ? "highlight" : "";
        return `
        <div class="module-card ${
          module.color || ""
        } ${highlightClass}" data-id="${module.id}">
          <h3>Stand ${module.id}</h3>
          <p>${module.info}</p>
        </div>
      `;
      }

      // Función para actualizar la visualización de los módulos
      function updateModulesDisplay() {
        filteredModules = filterModules(searchQuery, activeFilter);

        if (searchQuery || activeFilter !== "all") {
          modulesContainer.innerHTML = renderFilteredResults();
        } else {
          modulesContainer.innerHTML = renderModulesByCategory();
        }

        // Agregar eventos a las tarjetas de módulos
        const moduleCards = document.querySelectorAll(".module-card");
        moduleCards.forEach((card) => {
          card.addEventListener("click", () => {
            const moduleId = card.getAttribute("data-id");
            alert(
              `Stand ${moduleId}: ${
                allModules.find((m) => m.id === moduleId)?.info ||
                "Información no disponible"
              }`
            );
          });
        });
      }

      // Inicializar el listado de módulos
      function initModulesList() {
        // Cargar los módulos iniciales
        filteredModules = allModules;
        updateModulesDisplay();

        // Configurar la búsqueda
        moduleSearchInput.addEventListener("input", (e) => {
          searchQuery = e.target.value;
          updateModulesDisplay();
        });

        // Configurar los botones de filtro
        filterButtons.forEach((button) => {
          button.addEventListener("click", () => {
            // Quitar la clase active de todos los botones
            filterButtons.forEach((btn) => {
              btn.classList.remove("active");
            });

            // Agregar la clase active al botón clickeado
            button.classList.add("active");

            // Actualizar el filtro activo
            activeFilter = button.getAttribute("data-filter");
            updateModulesDisplay();
          });
        });

        // Configurar el botón de volver arriba
        window.addEventListener("scroll", () => {
          if (window.scrollY > 300) {
            backToTop.classList.add("visible");
          } else {
            backToTop.classList.remove("visible");
          }
        });

        backToTop.addEventListener("click", (e) => {
          e.preventDefault();
          window.scrollTo({ top: 0, behavior: "smooth" });
        });

        // Configurar el botón de mapa interactivo
        toggleMapBtn.addEventListener("click", () => {
          const isVisible = interactiveMapContainer.style.display === "block";
          if (isVisible) {
            interactiveMapContainer.style.display = "none";
            toggleMapBtn.textContent = "Mostrar Mapa Interactivo";
          } else {
            interactiveMapContainer.style.display = "block";
            toggleMapBtn.textContent = "Ocultar Mapa Interactivo";
            // Inicializar el mapa si es la primera vez que se muestra
            if (!mapInitialized) {
              initMap();
              mapInitialized = true;
            }
          }
        });
      }

      // Inicializar la aplicación cuando el DOM esté listo
      document.addEventListener("DOMContentLoaded", () => {
        // Inicializar el listado de módulos
        initModulesList();
      });
    </script>
  </body>
</html>
